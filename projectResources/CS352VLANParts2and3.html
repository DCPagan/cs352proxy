<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<HTML>
<HEAD>
	<META HTTP-EQUIV="CONTENT-TYPE" CONTENT="text/html; charset=utf-8">
	<TITLE></TITLE>
	<META NAME="GENERATOR" CONTENT="LibreOffice 3.5  (Linux)">
	<META NAME="CREATED" CONTENT="20101201;11322700">
	<META NAME="CHANGEDBY" CONTENT="Rich Martin">
	<META NAME="CHANGED" CONTENT="20121204;10400200">
	<META NAME="Info 1" CONTENT="">
	<META NAME="Info 2" CONTENT="">
	<META NAME="Info 3" CONTENT="">
	<META NAME="Info 4" CONTENT="">
	<META NAME="SDFOOTNOTE" CONTENT=";;;;P">
	<STYLE TYPE="text/css">
	<!--
		@page { margin: 1in }
		TD P { margin-bottom: 0in; color: #000000; widows: 2; orphans: 2 }
		TD P.western { font-size: 12pt; so-language: en-US }
		TD P.cjk { font-size: 12pt }
		TD P.ctl { font-size: 12pt }
		PRE { color: #000000; widows: 2; orphans: 2 }
		PRE.western { font-family: "Courier New", monospace; so-language: en-US }
		PRE.cjk { font-family: "Courier New", monospace }
		PRE.ctl { font-family: "Courier New", monospace }
		P { color: #000000; widows: 2; orphans: 2 }
		P.western { font-size: 12pt; so-language: en-US }
		P.cjk { font-size: 12pt }
		P.ctl { font-size: 12pt }
		A:link { so-language: zxx }
	-->
	</STYLE>
</HEAD>
<BODY LANG="en-US" TEXT="#000000" DIR="LTR">
<P ALIGN=CENTER STYLE="margin-bottom: 0in; line-height: 115%"><FONT COLOR="#000000"><SPAN STYLE="text-decoration: none"><FONT FACE="Arial, sans-serif"><FONT SIZE=5><SPAN STYLE="font-style: normal"><SPAN STYLE="font-weight: normal">Rutgers
Computer Science 352 </SPAN></SPAN></FONT></FONT></SPAN></FONT>
</P>
<P ALIGN=CENTER STYLE="margin-bottom: 0in; line-height: 115%"><FONT COLOR="#000000"><SPAN STYLE="text-decoration: none"><FONT FACE="Arial, sans-serif"><FONT SIZE=5><SPAN STYLE="font-style: normal"><SPAN STYLE="font-weight: normal">VLAN
Parts 2 and 3: </SPAN></SPAN></FONT></FONT></SPAN></FONT>
</P>
<P ALIGN=CENTER STYLE="margin-bottom: 0in; line-height: 115%"><FONT COLOR="#000000"><SPAN STYLE="text-decoration: none"><FONT FACE="Arial, sans-serif"><FONT SIZE=5><SPAN STYLE="font-style: normal"><SPAN STYLE="font-weight: normal">Multiple
Peers and Routing</SPAN></SPAN></FONT></FONT></SPAN></FONT></P>
<P ALIGN=JUSTIFY STYLE="margin-bottom: 0in; font-style: normal; font-weight: normal; line-height: 115%; text-decoration: none">
<BR>
</P>
<P ALIGN=JUSTIFY STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P ALIGN=JUSTIFY STYLE="margin-bottom: 0in; line-height: 115%"><FONT COLOR="#000000"><SPAN STYLE="text-decoration: none"><FONT FACE="Arial, sans-serif"><FONT SIZE=2 STYLE="font-size: 11pt"><SPAN STYLE="font-style: normal"><SPAN STYLE="font-weight: normal">Changes:
</SPAN></SPAN></FONT></FONT></SPAN></FONT>
</P>
<P ALIGN=JUSTIFY STYLE="margin-bottom: 0in; line-height: 115%"><FONT COLOR="#000000"><SPAN STYLE="text-decoration: none"><FONT FACE="Arial, sans-serif"><FONT SIZE=2 STYLE="font-size: 11pt"><SPAN STYLE="font-style: normal"><SPAN STYLE="font-weight: normal">	(12/4)
 More information on how to build and maintain the link state graph
is below. </SPAN></SPAN></FONT></FONT></SPAN></FONT>
</P>
<P ALIGN=JUSTIFY STYLE="margin-bottom: 0in; line-height: 115%"><FONT COLOR="#000000"><SPAN STYLE="text-decoration: none"><FONT FACE="Arial, sans-serif"><FONT SIZE=2 STYLE="font-size: 11pt"><SPAN STYLE="font-style: normal"><SPAN STYLE="font-weight: normal">	(12/4)
In order to simplify the assignment, proxies do not have to connect
to peers that are not in the configuration file. </SPAN></SPAN></FONT></FONT></SPAN></FONT>
</P>
<P ALIGN=JUSTIFY STYLE="margin-bottom: 0in; line-height: 115%"><FONT COLOR="#000000"><SPAN STYLE="text-decoration: none"><FONT FACE="Arial, sans-serif"><FONT SIZE=2 STYLE="font-size: 11pt"><SPAN STYLE="font-style: normal"><SPAN STYLE="font-weight: normal">	(12/4)
If no TAP device is specified in the configuration file, use the eth0
address as the MAC identifier.  You can read the file
/sys/class/net/eth0 to get the address. </SPAN></SPAN></FONT></FONT></SPAN></FONT>
</P>
<P ALIGN=JUSTIFY STYLE="margin-bottom: 0in; line-height: 115%"><FONT COLOR="#000000"><SPAN STYLE="text-decoration: none"><FONT FACE="Arial, sans-serif"><FONT SIZE=2 STYLE="font-size: 11pt"><SPAN STYLE="font-style: normal"><SPAN STYLE="font-weight: normal">	(12/4)
Assign every TAP device a 10.x.y.z address, do not use 192.168.x.y as
these are routed by the network managing the virtual machines. </SPAN></SPAN></FONT></FONT></SPAN></FONT>
</P>
<P ALIGN=JUSTIFY STYLE="margin-bottom: 0in; line-height: 115%"><FONT COLOR="#000000"><SPAN STYLE="text-decoration: none"><FONT FACE="Arial, sans-serif"><FONT SIZE=2 STYLE="font-size: 11pt"><SPAN STYLE="font-style: normal"><SPAN STYLE="font-weight: normal">	(11/29)
Fixed discrepancy in types of the link state packet between the text
and the table.</SPAN></SPAN></FONT></FONT></SPAN></FONT></P>
<P ALIGN=JUSTIFY STYLE="margin-bottom: 0in; line-height: 115%"><FONT COLOR="#000000"><SPAN STYLE="text-decoration: none"><FONT FACE="Arial, sans-serif"><FONT SIZE=2 STYLE="font-size: 11pt"><SPAN STYLE="font-style: normal"><SPAN STYLE="font-weight: normal">	(11/29)
Added an additional tips and tricks section.  </SPAN></SPAN></FONT></FONT></SPAN></FONT>
</P>
<P ALIGN=JUSTIFY STYLE="margin-bottom: 0in; line-height: 115%"><FONT COLOR="#000000"><SPAN STYLE="text-decoration: none"><FONT FACE="Arial, sans-serif"><FONT SIZE=2 STYLE="font-size: 11pt"><SPAN STYLE="font-style: normal"><SPAN STYLE="font-weight: normal">	(11/25)
Make sure to use the </SPAN></SPAN></FONT></FONT></SPAN></FONT><FONT COLOR="#000000"><SPAN STYLE="text-decoration: none"><FONT FACE="Courier New, monospace"><FONT SIZE=2 STYLE="font-size: 11pt"><SPAN STYLE="font-style: normal"><SPAN STYLE="font-weight: normal">openvpn</SPAN></SPAN></FONT></FONT></SPAN></FONT><FONT COLOR="#000000"><SPAN STYLE="text-decoration: none"><FONT FACE="Arial, sans-serif"><FONT SIZE=2 STYLE="font-size: 11pt"><SPAN STYLE="font-style: normal"><SPAN STYLE="font-weight: normal">
create a tap device, not a tun device. See the section below for more
information. </SPAN></SPAN></FONT></FONT></SPAN></FONT>
</P>
<P ALIGN=JUSTIFY STYLE="margin-bottom: 0in; line-height: 115%"><FONT COLOR="#000000"><SPAN STYLE="text-decoration: none"><FONT FACE="Arial, sans-serif"><FONT SIZE=2 STYLE="font-size: 11pt"><SPAN STYLE="font-style: normal"><SPAN STYLE="font-weight: normal">	(11/25)
Added port configuration commands to the configuration file format. </SPAN></SPAN></FONT></FONT></SPAN></FONT>
</P>
<P ALIGN=JUSTIFY STYLE="margin-bottom: 0in; line-height: 115%"><FONT COLOR="#000000"><SPAN STYLE="text-decoration: none"><FONT FACE="Arial, sans-serif"><FONT SIZE=2 STYLE="font-size: 11pt"><SPAN STYLE="font-style: normal"><SPAN STYLE="font-weight: normal">	(11/06)
Fixed leave message to 0xAB01 to be consistent with table and
description.</SPAN></SPAN></FONT></FONT></SPAN></FONT></P>
<P ALIGN=JUSTIFY STYLE="margin-bottom: 0in; line-height: 115%"><FONT COLOR="#000000"><SPAN STYLE="text-decoration: none"><FONT FACE="Arial, sans-serif"><FONT SIZE=2 STYLE="font-size: 11pt"><SPAN STYLE="font-style: normal"><SPAN STYLE="font-weight: normal">	(11/06).
Fixed bandwidth probe/response packets to not collide with other
types.</SPAN></SPAN></FONT></FONT></SPAN></FONT></P>
<P ALIGN=JUSTIFY STYLE="margin-bottom: 0in; line-height: 115%"><FONT COLOR="#000000"><SPAN STYLE="text-decoration: none"><FONT FACE="Arial, sans-serif"><FONT SIZE=2 STYLE="font-size: 11pt"><SPAN STYLE="font-style: normal"><SPAN STYLE="font-weight: normal">	(11/06)
You must insure and can assume IDs are monotonically increasing. 
That is,  if ID X &lt; Y then X is older than Y. </SPAN></SPAN></FONT></FONT></SPAN></FONT>
</P>
<P ALIGN=JUSTIFY STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P ALIGN=JUSTIFY STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P ALIGN=JUSTIFY STYLE="margin-bottom: 0in; line-height: 115%"><FONT COLOR="#000000"><SPAN STYLE="text-decoration: none"><FONT FACE="Arial, sans-serif"><FONT SIZE=2 STYLE="font-size: 11pt"><SPAN STYLE="font-style: normal"><SPAN STYLE="font-weight: normal">In
this version of the project, you will implement multiple proxies
joining and leaving the virtual local area network (VLAN). You will
also implement a basic routing protocol between the proxies to
support topologies where not all the proxies are connected.  For part
2, you can assume all peers are reachable over a TCP socket. For part
3, some peers may not be able to connect to each other over a TCP
socket. </SPAN></SPAN></FONT></FONT></SPAN></FONT>
</P>
<P ALIGN=LEFT STYLE="margin-top: 0.19in; margin-bottom: 0.06in; line-height: 115%"><A NAME="h.5zrrew92tlta"></A>
<FONT COLOR="#000000"><SPAN STYLE="text-decoration: none"><FONT FACE="Arial, sans-serif"><FONT SIZE=4><SPAN STYLE="font-style: normal"><B>Theory</B></SPAN></FONT></FONT></SPAN></FONT><FONT COLOR="#000000"><SPAN STYLE="text-decoration: none"><FONT FACE="Arial, sans-serif"><FONT SIZE=4><SPAN STYLE="font-style: normal"><B>
</B></SPAN></FONT></FONT></SPAN></FONT><FONT COLOR="#000000"><SPAN STYLE="text-decoration: none"><FONT FACE="Arial, sans-serif"><FONT SIZE=4><SPAN STYLE="font-style: normal"><B>of</B></SPAN></FONT></FONT></SPAN></FONT><FONT COLOR="#000000"><SPAN STYLE="text-decoration: none"><FONT FACE="Arial, sans-serif"><FONT SIZE=4><SPAN STYLE="font-style: normal"><B>
</B></SPAN></FONT></FONT></SPAN></FONT><FONT COLOR="#000000"><SPAN STYLE="text-decoration: none"><FONT FACE="Arial, sans-serif"><FONT SIZE=4><SPAN STYLE="font-style: normal"><B>Operation</B></SPAN></FONT></FONT></SPAN></FONT></P>
<P ALIGN=JUSTIFY STYLE="margin-bottom: 0in; line-height: 115%"><FONT COLOR="#000000"><SPAN STYLE="text-decoration: none"><FONT FACE="Arial, sans-serif"><FONT SIZE=2 STYLE="font-size: 11pt"><SPAN STYLE="font-style: normal"><SPAN STYLE="font-weight: normal">Upon
start up, a client proxy will connect to a single peer proxy. From
this point on the proxies will send various packet types to maintain
the VLAN. These include: (1) link state packets, (2) data packets,
and (3) probe packets.  Link state packets describe the state, in
terms of IP addresses and network performance, between two proxies.
Probe packets are sent to measure link performance. Data packets send
and receive the data that emulates the VLAN. </SPAN></SPAN></FONT></FONT></SPAN></FONT>
</P>
<P ALIGN=JUSTIFY STYLE="margin-bottom: 0in; font-style: normal; font-weight: normal; line-height: 115%; text-decoration: none">
<BR>
</P>
<P ALIGN=JUSTIFY STYLE="margin-bottom: 0in; line-height: 115%"><FONT COLOR="#000000"><SPAN STYLE="text-decoration: none"><FONT FACE="Arial, sans-serif"><FONT SIZE=2 STYLE="font-size: 11pt"><SPAN STYLE="font-style: normal"><SPAN STYLE="font-weight: normal">Proxies
will flood</SPAN></SPAN></FONT></FONT></SPAN></FONT><FONT COLOR="#000000"><SPAN STYLE="text-decoration: none"><FONT FACE="Arial, sans-serif"><FONT SIZE=2 STYLE="font-size: 11pt"><I><SPAN STYLE="font-weight: normal">
link state packets </SPAN></I></FONT></FONT></SPAN></FONT><FONT COLOR="#000000"><SPAN STYLE="text-decoration: none"><FONT FACE="Arial, sans-serif"><FONT SIZE=2 STYLE="font-size: 11pt"><SPAN STYLE="font-style: normal"><SPAN STYLE="font-weight: normal">amongst
themselves. These describe the state of the TAP interface and the TCP
socket connection between two proxies. Upon receiving a link state
packet, proxies will update these structures: </SPAN></SPAN></FONT></FONT></SPAN></FONT>
</P>
<P ALIGN=JUSTIFY STYLE="margin-bottom: 0in; font-style: normal; font-weight: normal; line-height: 115%; text-decoration: none">
<BR>
</P>
<OL>
	<LI><P ALIGN=JUSTIFY STYLE="margin-bottom: 0in; font-weight: normal; line-height: 115%; text-decoration: none">
	<FONT FACE="Arial, sans-serif"><FONT SIZE=2 STYLE="font-size: 11pt"><I>Membership
	list (both parts 2 and 3):</I><SPAN STYLE="font-style: normal"> a
	list of all the proxies in the VLAN. In part 3, you may extend this
	with a link list, which is a set of link-states between pairs of
	members. </SPAN></FONT></FONT>
	</P>
	<LI><P ALIGN=JUSTIFY STYLE="margin-bottom: 0in; font-weight: normal; line-height: 115%; text-decoration: none">
	<FONT FACE="Arial, sans-serif"><FONT SIZE=2 STYLE="font-size: 11pt"><SPAN STYLE="font-style: normal">A
	</SPAN><I>link state list (part 3).</I><SPAN STYLE="font-style: normal">
	Each link state represents the connection status between 2 proxies. </SPAN></FONT></FONT>
	</P>
	<LI><P ALIGN=JUSTIFY STYLE="margin-bottom: 0in; font-weight: normal; line-height: 115%; text-decoration: none">
	<FONT FACE="Arial, sans-serif"><FONT SIZE=2 STYLE="font-size: 11pt"><I><FONT COLOR="#000000"><SPAN STYLE="text-decoration: none"><FONT FACE="Arial, sans-serif"><FONT SIZE=2 STYLE="font-size: 11pt"><SPAN STYLE="font-weight: normal">Forwarding</SPAN></FONT></FONT></SPAN></FONT><FONT COLOR="#000000"><SPAN STYLE="text-decoration: none"><FONT FACE="Arial, sans-serif"><FONT SIZE=2 STYLE="font-size: 11pt"><SPAN STYLE="font-weight: normal">
	</SPAN></FONT></FONT></SPAN></FONT><FONT COLOR="#000000"><SPAN STYLE="text-decoration: none"><FONT FACE="Arial, sans-serif"><FONT SIZE=2 STYLE="font-size: 11pt"><SPAN STYLE="font-weight: normal">table</SPAN></FONT></FONT></SPAN></FONT></I><FONT COLOR="#000000"><SPAN STYLE="text-decoration: none"><FONT FACE="Arial, sans-serif"><FONT SIZE=2 STYLE="font-size: 11pt"><SPAN STYLE="font-style: normal"><SPAN STYLE="font-weight: normal">
	(</SPAN></SPAN></FONT></FONT></SPAN></FONT><FONT COLOR="#000000"><SPAN STYLE="text-decoration: none"><FONT FACE="Arial, sans-serif"><FONT SIZE=2 STYLE="font-size: 11pt"><SPAN STYLE="font-style: normal"><SPAN STYLE="font-weight: normal">parts</SPAN></SPAN></FONT></FONT></SPAN></FONT><FONT COLOR="#000000"><SPAN STYLE="text-decoration: none"><FONT FACE="Arial, sans-serif"><FONT SIZE=2 STYLE="font-size: 11pt"><SPAN STYLE="font-style: normal"><SPAN STYLE="font-weight: normal">
	2 </SPAN></SPAN></FONT></FONT></SPAN></FONT><FONT COLOR="#000000"><SPAN STYLE="text-decoration: none"><FONT FACE="Arial, sans-serif"><FONT SIZE=2 STYLE="font-size: 11pt"><SPAN STYLE="font-style: normal"><SPAN STYLE="font-weight: normal">and</SPAN></SPAN></FONT></FONT></SPAN></FONT><FONT COLOR="#000000"><SPAN STYLE="text-decoration: none"><FONT FACE="Arial, sans-serif"><FONT SIZE=2 STYLE="font-size: 11pt"><SPAN STYLE="font-style: normal"><SPAN STYLE="font-weight: normal">
	3): </SPAN></SPAN></FONT></FONT></SPAN></FONT><FONT COLOR="#000000"><SPAN STYLE="text-decoration: none"><FONT FACE="Arial, sans-serif"><FONT SIZE=2 STYLE="font-size: 11pt"><SPAN STYLE="font-style: normal"><SPAN STYLE="font-weight: normal">describes</SPAN></SPAN></FONT></FONT></SPAN></FONT><FONT COLOR="#000000"><SPAN STYLE="text-decoration: none"><FONT FACE="Arial, sans-serif"><FONT SIZE=2 STYLE="font-size: 11pt"><SPAN STYLE="font-style: normal"><SPAN STYLE="font-weight: normal">
	</SPAN></SPAN></FONT></FONT></SPAN></FONT><FONT COLOR="#000000"><SPAN STYLE="text-decoration: none"><FONT FACE="Arial, sans-serif"><FONT SIZE=2 STYLE="font-size: 11pt"><SPAN STYLE="font-style: normal"><SPAN STYLE="font-weight: normal">the</SPAN></SPAN></FONT></FONT></SPAN></FONT><FONT COLOR="#000000"><SPAN STYLE="text-decoration: none"><FONT FACE="Arial, sans-serif"><FONT SIZE=2 STYLE="font-size: 11pt"><SPAN STYLE="font-style: normal"><SPAN STYLE="font-weight: normal">
	</SPAN></SPAN></FONT></FONT></SPAN></FONT><FONT COLOR="#000000"><SPAN STYLE="text-decoration: none"><FONT FACE="Arial, sans-serif"><FONT SIZE=2 STYLE="font-size: 11pt"><SPAN STYLE="font-style: normal"><SPAN STYLE="font-weight: normal">next</SPAN></SPAN></FONT></FONT></SPAN></FONT><FONT COLOR="#000000"><SPAN STYLE="text-decoration: none"><FONT FACE="Arial, sans-serif"><FONT SIZE=2 STYLE="font-size: 11pt"><SPAN STYLE="font-style: normal"><SPAN STYLE="font-weight: normal">
	</SPAN></SPAN></FONT></FONT></SPAN></FONT><FONT COLOR="#000000"><SPAN STYLE="text-decoration: none"><FONT FACE="Arial, sans-serif"><FONT SIZE=2 STYLE="font-size: 11pt"><SPAN STYLE="font-style: normal"><SPAN STYLE="font-weight: normal">hop</SPAN></SPAN></FONT></FONT></SPAN></FONT><FONT COLOR="#000000"><SPAN STYLE="text-decoration: none"><FONT FACE="Arial, sans-serif"><FONT SIZE=2 STYLE="font-size: 11pt"><SPAN STYLE="font-style: normal"><SPAN STYLE="font-weight: normal">
	</SPAN></SPAN></FONT></FONT></SPAN></FONT><FONT COLOR="#000000"><SPAN STYLE="text-decoration: none"><FONT FACE="Arial, sans-serif"><FONT SIZE=2 STYLE="font-size: 11pt"><SPAN STYLE="font-style: normal"><SPAN STYLE="font-weight: normal">for</SPAN></SPAN></FONT></FONT></SPAN></FONT><FONT COLOR="#000000"><SPAN STYLE="text-decoration: none"><FONT FACE="Arial, sans-serif"><FONT SIZE=2 STYLE="font-size: 11pt"><SPAN STYLE="font-style: normal"><SPAN STYLE="font-weight: normal">
	</SPAN></SPAN></FONT></FONT></SPAN></FONT><FONT COLOR="#000000"><SPAN STYLE="text-decoration: none"><FONT FACE="Arial, sans-serif"><FONT SIZE=2 STYLE="font-size: 11pt"><SPAN STYLE="font-style: normal"><SPAN STYLE="font-weight: normal">a</SPAN></SPAN></FONT></FONT></SPAN></FONT><FONT COLOR="#000000"><SPAN STYLE="text-decoration: none"><FONT FACE="Arial, sans-serif"><FONT SIZE=2 STYLE="font-size: 11pt"><SPAN STYLE="font-style: normal"><SPAN STYLE="font-weight: normal">
	</SPAN></SPAN></FONT></FONT></SPAN></FONT><FONT COLOR="#000000"><SPAN STYLE="text-decoration: none"><FONT FACE="Arial, sans-serif"><FONT SIZE=2 STYLE="font-size: 11pt"><SPAN STYLE="font-style: normal"><SPAN STYLE="font-weight: normal">given</SPAN></SPAN></FONT></FONT></SPAN></FONT><FONT COLOR="#000000"><SPAN STYLE="text-decoration: none"><FONT FACE="Arial, sans-serif"><FONT SIZE=2 STYLE="font-size: 11pt"><SPAN STYLE="font-style: normal"><SPAN STYLE="font-weight: normal">
	</SPAN></SPAN></FONT></FONT></SPAN></FONT><FONT COLOR="#000000"><SPAN STYLE="text-decoration: none"><FONT FACE="Arial, sans-serif"><FONT SIZE=2 STYLE="font-size: 11pt"><SPAN STYLE="font-style: normal"><SPAN STYLE="font-weight: normal">layer</SPAN></SPAN></FONT></FONT></SPAN></FONT><FONT COLOR="#000000"><SPAN STYLE="text-decoration: none"><FONT FACE="Arial, sans-serif"><FONT SIZE=2 STYLE="font-size: 11pt"><SPAN STYLE="font-style: normal"><SPAN STYLE="font-weight: normal">-2
	</SPAN></SPAN></FONT></FONT></SPAN></FONT><FONT COLOR="#000000"><SPAN STYLE="text-decoration: none"><FONT FACE="Arial, sans-serif"><FONT SIZE=2 STYLE="font-size: 11pt"><SPAN STYLE="font-style: normal"><SPAN STYLE="font-weight: normal">destination</SPAN></SPAN></FONT></FONT></SPAN></FONT><FONT COLOR="#000000"><SPAN STYLE="text-decoration: none"><FONT FACE="Arial, sans-serif"><FONT SIZE=2 STYLE="font-size: 11pt"><SPAN STYLE="font-style: normal"><SPAN STYLE="font-weight: normal">.
	 </SPAN></SPAN></FONT></FONT></SPAN></FONT></FONT></FONT>
	</P>
	<LI><P ALIGN=JUSTIFY STYLE="margin-bottom: 0in; font-weight: normal; line-height: 115%; text-decoration: none">
	<FONT FACE="Arial, sans-serif"><FONT SIZE=2 STYLE="font-size: 11pt"><I>Routing
	graph</I><SPAN STYLE="font-style: normal"> (part 3): representing
	the topology, or connections between all the proxies. The directed
	graph is computable from the membership set, which are  the
	vertices, and the link states, which are the edges. </SPAN></FONT></FONT>
	</P>
</OL>
<P ALIGN=JUSTIFY STYLE="margin-bottom: 0in; font-style: normal; font-weight: normal; line-height: 115%; text-decoration: none">
<BR>
</P>
<P ALIGN=JUSTIFY STYLE="margin-bottom: 0in; line-height: 115%"><FONT COLOR="#000000"><SPAN STYLE="text-decoration: none"><FONT FACE="Arial, sans-serif"><FONT SIZE=2 STYLE="font-size: 11pt"><SPAN STYLE="font-style: normal"><SPAN STYLE="font-weight: normal">The
membership of the proxies is </SPAN></SPAN></FONT></FONT></SPAN></FONT><FONT COLOR="#000000"><SPAN STYLE="text-decoration: none"><FONT FACE="Arial, sans-serif"><FONT SIZE=2 STYLE="font-size: 11pt"><SPAN STYLE="font-style: normal"><B>soft
state: </B></SPAN></FONT></FONT></SPAN></FONT><FONT COLOR="#000000"><SPAN STYLE="text-decoration: none"><FONT FACE="Arial, sans-serif"><FONT SIZE=2 STYLE="font-size: 11pt"><SPAN STYLE="font-style: normal"><SPAN STYLE="font-weight: normal">it
must be refreshed periodically or members will be removed from the
list. Proxies maintain themselves on peer proxiesâ€™ membership lists
by periodically sending updated link state records.. Each link-state
record gets a unique ID, which </SPAN></SPAN></FONT></FONT></SPAN></FONT><FONT COLOR="#000000"><SPAN STYLE="text-decoration: none"><FONT FACE="Arial, sans-serif"><FONT SIZE=2 STYLE="font-size: 11pt"><SPAN STYLE="font-style: normal"><SPAN STYLE="font-weight: normal">is
timestamped on arrival. A proxy should send a link state packet every</SPAN></SPAN></FONT></FONT></SPAN></FONT><FONT COLOR="#000000"><SPAN STYLE="text-decoration: none"><FONT FACE="Courier New, monospace"><FONT SIZE=2 STYLE="font-size: 11pt"><SPAN STYLE="font-style: normal"><SPAN STYLE="font-weight: normal">
linkPeriod</SPAN></SPAN></FONT></FONT></SPAN></FONT><FONT COLOR="#000000"><SPAN STYLE="text-decoration: none"><FONT FACE="Arial, sans-serif"><FONT SIZE=2 STYLE="font-size: 11pt"><SPAN STYLE="font-style: normal"><SPAN STYLE="font-weight: normal">
seconds and clear entries if no link state record is received after
</SPAN></SPAN></FONT></FONT></SPAN></FONT><FONT COLOR="#000000"><SPAN STYLE="text-decoration: none"><FONT FACE="Courier New, monospace"><FONT SIZE=2 STYLE="font-size: 11pt"><SPAN STYLE="font-style: normal"><SPAN STYLE="font-weight: normal">linkTImeout</SPAN></SPAN></FONT></FONT></SPAN></FONT><FONT COLOR="#000000"><SPAN STYLE="text-decoration: none"><FONT FACE="Arial, sans-serif"><FONT SIZE=2 STYLE="font-size: 11pt"><SPAN STYLE="font-style: normal"><SPAN STYLE="font-weight: normal">
seconds from the current time. These parameters should be in your
configuration file. </SPAN></SPAN></FONT></FONT></SPAN></FONT>
</P>
<P ALIGN=JUSTIFY STYLE="margin-bottom: 0in; font-style: normal; font-weight: normal; line-height: 115%; text-decoration: none">
<BR>
</P>
<P ALIGN=JUSTIFY STYLE="margin-bottom: 0in; line-height: 115%"><FONT COLOR="#000000"><SPAN STYLE="text-decoration: none"><FONT FACE="Arial, sans-serif"><FONT SIZE=2 STYLE="font-size: 11pt"><SPAN STYLE="font-style: normal"><SPAN STYLE="font-weight: normal">The
forwarding table is a simple structure that maps destination layer-2
addresses (also called Media Access Control or Ethernet headers) to a
next-hop proxy. For part 2, you can assume all proxies are directly
connected. </SPAN></SPAN></FONT></FONT></SPAN></FONT>
</P>
<P ALIGN=JUSTIFY STYLE="margin-bottom: 0in; font-style: normal; font-weight: normal; line-height: 115%; text-decoration: none">
<BR>
</P>
<P ALIGN=JUSTIFY STYLE="margin-bottom: 0in; line-height: 115%"><FONT COLOR="#000000"><SPAN STYLE="text-decoration: none"><FONT FACE="Arial, sans-serif"><FONT SIZE=2 STYLE="font-size: 11pt"><SPAN STYLE="font-style: normal"><SPAN STYLE="font-weight: normal">The</SPAN></SPAN></FONT></FONT></SPAN></FONT><FONT COLOR="#000000"><SPAN STYLE="text-decoration: none"><FONT FACE="Arial, sans-serif"><FONT SIZE=2 STYLE="font-size: 11pt"><SPAN STYLE="font-style: normal"><SPAN STYLE="font-weight: normal">
</SPAN></SPAN></FONT></FONT></SPAN></FONT><FONT COLOR="#000000"><SPAN STYLE="text-decoration: none"><FONT FACE="Arial, sans-serif"><FONT SIZE=2 STYLE="font-size: 11pt"><SPAN STYLE="font-style: normal"><SPAN STYLE="font-weight: normal">routing</SPAN></SPAN></FONT></FONT></SPAN></FONT><FONT COLOR="#000000"><SPAN STYLE="text-decoration: none"><FONT FACE="Arial, sans-serif"><FONT SIZE=2 STYLE="font-size: 11pt"><SPAN STYLE="font-style: normal"><SPAN STYLE="font-weight: normal">
</SPAN></SPAN></FONT></FONT></SPAN></FONT><FONT COLOR="#000000"><SPAN STYLE="text-decoration: none"><FONT FACE="Arial, sans-serif"><FONT SIZE=2 STYLE="font-size: 11pt"><SPAN STYLE="font-style: normal"><SPAN STYLE="font-weight: normal">graph</SPAN></SPAN></FONT></FONT></SPAN></FONT><FONT COLOR="#000000"><SPAN STYLE="text-decoration: none"><FONT FACE="Arial, sans-serif"><FONT SIZE=2 STYLE="font-size: 11pt"><SPAN STYLE="font-style: normal"><SPAN STYLE="font-weight: normal">
</SPAN></SPAN></FONT></FONT></SPAN></FONT><FONT COLOR="#000000"><SPAN STYLE="text-decoration: none"><FONT FACE="Arial, sans-serif"><FONT SIZE=2 STYLE="font-size: 11pt"><SPAN STYLE="font-style: normal"><SPAN STYLE="font-weight: normal">is</SPAN></SPAN></FONT></FONT></SPAN></FONT><FONT COLOR="#000000"><SPAN STYLE="text-decoration: none"><FONT FACE="Arial, sans-serif"><FONT SIZE=2 STYLE="font-size: 11pt"><SPAN STYLE="font-style: normal"><SPAN STYLE="font-weight: normal">
</SPAN></SPAN></FONT></FONT></SPAN></FONT><FONT COLOR="#000000"><SPAN STYLE="text-decoration: none"><FONT FACE="Arial, sans-serif"><FONT SIZE=2 STYLE="font-size: 11pt"><SPAN STYLE="font-style: normal"><SPAN STYLE="font-weight: normal">a</SPAN></SPAN></FONT></FONT></SPAN></FONT><FONT COLOR="#000000"><SPAN STYLE="text-decoration: none"><FONT FACE="Arial, sans-serif"><FONT SIZE=2 STYLE="font-size: 11pt"><SPAN STYLE="font-style: normal"><SPAN STYLE="font-weight: normal">
</SPAN></SPAN></FONT></FONT></SPAN></FONT><FONT COLOR="#000000"><SPAN STYLE="text-decoration: none"><FONT FACE="Arial, sans-serif"><FONT SIZE=2 STYLE="font-size: 11pt"><SPAN STYLE="font-style: normal"><SPAN STYLE="font-weight: normal">structure</SPAN></SPAN></FONT></FONT></SPAN></FONT><FONT COLOR="#000000"><SPAN STYLE="text-decoration: none"><FONT FACE="Arial, sans-serif"><FONT SIZE=2 STYLE="font-size: 11pt"><SPAN STYLE="font-style: normal"><SPAN STYLE="font-weight: normal">
</SPAN></SPAN></FONT></FONT></SPAN></FONT><FONT COLOR="#000000"><SPAN STYLE="text-decoration: none"><FONT FACE="Arial, sans-serif"><FONT SIZE=2 STYLE="font-size: 11pt"><SPAN STYLE="font-style: normal"><SPAN STYLE="font-weight: normal">that</SPAN></SPAN></FONT></FONT></SPAN></FONT><FONT COLOR="#000000"><SPAN STYLE="text-decoration: none"><FONT FACE="Arial, sans-serif"><FONT SIZE=2 STYLE="font-size: 11pt"><SPAN STYLE="font-style: normal"><SPAN STYLE="font-weight: normal">
</SPAN></SPAN></FONT></FONT></SPAN></FONT><FONT COLOR="#000000"><SPAN STYLE="text-decoration: none"><FONT FACE="Arial, sans-serif"><FONT SIZE=2 STYLE="font-size: 11pt"><SPAN STYLE="font-style: normal"><SPAN STYLE="font-weight: normal">your</SPAN></SPAN></FONT></FONT></SPAN></FONT><FONT COLOR="#000000"><SPAN STYLE="text-decoration: none"><FONT FACE="Arial, sans-serif"><FONT SIZE=2 STYLE="font-size: 11pt"><SPAN STYLE="font-style: normal"><SPAN STYLE="font-weight: normal">
</SPAN></SPAN></FONT></FONT></SPAN></FONT><FONT COLOR="#000000"><SPAN STYLE="text-decoration: none"><FONT FACE="Arial, sans-serif"><FONT SIZE=2 STYLE="font-size: 11pt"><SPAN STYLE="font-style: normal"><SPAN STYLE="font-weight: normal">group</SPAN></SPAN></FONT></FONT></SPAN></FONT><FONT COLOR="#000000"><SPAN STYLE="text-decoration: none"><FONT FACE="Arial, sans-serif"><FONT SIZE=2 STYLE="font-size: 11pt"><SPAN STYLE="font-style: normal"><SPAN STYLE="font-weight: normal">
</SPAN></SPAN></FONT></FONT></SPAN></FONT><FONT COLOR="#000000"><SPAN STYLE="text-decoration: none"><FONT FACE="Arial, sans-serif"><FONT SIZE=2 STYLE="font-size: 11pt"><SPAN STYLE="font-style: normal"><SPAN STYLE="font-weight: normal">will</SPAN></SPAN></FONT></FONT></SPAN></FONT><FONT COLOR="#000000"><SPAN STYLE="text-decoration: none"><FONT FACE="Arial, sans-serif"><FONT SIZE=2 STYLE="font-size: 11pt"><SPAN STYLE="font-style: normal"><SPAN STYLE="font-weight: normal">
</SPAN></SPAN></FONT></FONT></SPAN></FONT><FONT COLOR="#000000"><SPAN STYLE="text-decoration: none"><FONT FACE="Arial, sans-serif"><FONT SIZE=2 STYLE="font-size: 11pt"><SPAN STYLE="font-style: normal"><SPAN STYLE="font-weight: normal">create</SPAN></SPAN></FONT></FONT></SPAN></FONT><FONT COLOR="#000000"><SPAN STYLE="text-decoration: none"><FONT FACE="Arial, sans-serif"><FONT SIZE=2 STYLE="font-size: 11pt"><SPAN STYLE="font-style: normal"><SPAN STYLE="font-weight: normal">
</SPAN></SPAN></FONT></FONT></SPAN></FONT><FONT COLOR="#000000"><SPAN STYLE="text-decoration: none"><FONT FACE="Arial, sans-serif"><FONT SIZE=2 STYLE="font-size: 11pt"><SPAN STYLE="font-style: normal"><SPAN STYLE="font-weight: normal">that</SPAN></SPAN></FONT></FONT></SPAN></FONT><FONT COLOR="#000000"><SPAN STYLE="text-decoration: none"><FONT FACE="Arial, sans-serif"><FONT SIZE=2 STYLE="font-size: 11pt"><SPAN STYLE="font-style: normal"><SPAN STYLE="font-weight: normal">
</SPAN></SPAN></FONT></FONT></SPAN></FONT><FONT COLOR="#000000"><SPAN STYLE="text-decoration: none"><FONT FACE="Arial, sans-serif"><FONT SIZE=2 STYLE="font-size: 11pt"><SPAN STYLE="font-style: normal"><SPAN STYLE="font-weight: normal">describes</SPAN></SPAN></FONT></FONT></SPAN></FONT><FONT COLOR="#000000"><SPAN STYLE="text-decoration: none"><FONT FACE="Arial, sans-serif"><FONT SIZE=2 STYLE="font-size: 11pt"><SPAN STYLE="font-style: normal"><SPAN STYLE="font-weight: normal">
</SPAN></SPAN></FONT></FONT></SPAN></FONT><FONT COLOR="#000000"><SPAN STYLE="text-decoration: none"><FONT FACE="Arial, sans-serif"><FONT SIZE=2 STYLE="font-size: 11pt"><SPAN STYLE="font-style: normal"><SPAN STYLE="font-weight: normal">the</SPAN></SPAN></FONT></FONT></SPAN></FONT><FONT COLOR="#000000"><SPAN STYLE="text-decoration: none"><FONT FACE="Arial, sans-serif"><FONT SIZE=2 STYLE="font-size: 11pt"><SPAN STYLE="font-style: normal"><SPAN STYLE="font-weight: normal">
</SPAN></SPAN></FONT></FONT></SPAN></FONT><FONT COLOR="#000000"><SPAN STYLE="text-decoration: none"><FONT FACE="Arial, sans-serif"><FONT SIZE=2 STYLE="font-size: 11pt"><SPAN STYLE="font-style: normal"><SPAN STYLE="font-weight: normal">topology</SPAN></SPAN></FONT></FONT></SPAN></FONT><FONT COLOR="#000000"><SPAN STYLE="text-decoration: none"><FONT FACE="Arial, sans-serif"><FONT SIZE=2 STYLE="font-size: 11pt"><SPAN STYLE="font-style: normal"><SPAN STYLE="font-weight: normal">
</SPAN></SPAN></FONT></FONT></SPAN></FONT><FONT COLOR="#000000"><SPAN STYLE="text-decoration: none"><FONT FACE="Arial, sans-serif"><FONT SIZE=2 STYLE="font-size: 11pt"><SPAN STYLE="font-style: normal"><SPAN STYLE="font-weight: normal">of</SPAN></SPAN></FONT></FONT></SPAN></FONT><FONT COLOR="#000000"><SPAN STYLE="text-decoration: none"><FONT FACE="Arial, sans-serif"><FONT SIZE=2 STYLE="font-size: 11pt"><SPAN STYLE="font-style: normal"><SPAN STYLE="font-weight: normal">
</SPAN></SPAN></FONT></FONT></SPAN></FONT><FONT COLOR="#000000"><SPAN STYLE="text-decoration: none"><FONT FACE="Arial, sans-serif"><FONT SIZE=2 STYLE="font-size: 11pt"><SPAN STYLE="font-style: normal"><SPAN STYLE="font-weight: normal">all</SPAN></SPAN></FONT></FONT></SPAN></FONT><FONT COLOR="#000000"><SPAN STYLE="text-decoration: none"><FONT FACE="Arial, sans-serif"><FONT SIZE=2 STYLE="font-size: 11pt"><SPAN STYLE="font-style: normal"><SPAN STYLE="font-weight: normal">
</SPAN></SPAN></FONT></FONT></SPAN></FONT><FONT COLOR="#000000"><SPAN STYLE="text-decoration: none"><FONT FACE="Arial, sans-serif"><FONT SIZE=2 STYLE="font-size: 11pt"><SPAN STYLE="font-style: normal"><SPAN STYLE="font-weight: normal">the</SPAN></SPAN></FONT></FONT></SPAN></FONT><FONT COLOR="#000000"><SPAN STYLE="text-decoration: none"><FONT FACE="Arial, sans-serif"><FONT SIZE=2 STYLE="font-size: 11pt"><SPAN STYLE="font-style: normal"><SPAN STYLE="font-weight: normal">
</SPAN></SPAN></FONT></FONT></SPAN></FONT><FONT COLOR="#000000"><SPAN STYLE="text-decoration: none"><FONT FACE="Arial, sans-serif"><FONT SIZE=2 STYLE="font-size: 11pt"><SPAN STYLE="font-style: normal"><SPAN STYLE="font-weight: normal">proxies</SPAN></SPAN></FONT></FONT></SPAN></FONT><FONT COLOR="#000000"><SPAN STYLE="text-decoration: none"><FONT FACE="Arial, sans-serif"><FONT SIZE=2 STYLE="font-size: 11pt"><SPAN STYLE="font-style: normal"><SPAN STYLE="font-weight: normal">.
</SPAN></SPAN></FONT></FONT></SPAN></FONT><FONT COLOR="#000000"><SPAN STYLE="text-decoration: none"><FONT FACE="Arial, sans-serif"><FONT SIZE=2 STYLE="font-size: 11pt"><SPAN STYLE="font-style: normal"><SPAN STYLE="font-weight: normal">You</SPAN></SPAN></FONT></FONT></SPAN></FONT><FONT COLOR="#000000"><SPAN STYLE="text-decoration: none"><FONT FACE="Arial, sans-serif"><FONT SIZE=2 STYLE="font-size: 11pt"><SPAN STYLE="font-style: normal"><SPAN STYLE="font-weight: normal">
</SPAN></SPAN></FONT></FONT></SPAN></FONT><FONT COLOR="#000000"><SPAN STYLE="text-decoration: none"><FONT FACE="Arial, sans-serif"><FONT SIZE=2 STYLE="font-size: 11pt"><SPAN STYLE="font-style: normal"><SPAN STYLE="font-weight: normal">will</SPAN></SPAN></FONT></FONT></SPAN></FONT><FONT COLOR="#000000"><SPAN STYLE="text-decoration: none"><FONT FACE="Arial, sans-serif"><FONT SIZE=2 STYLE="font-size: 11pt"><SPAN STYLE="font-style: normal"><SPAN STYLE="font-weight: normal">
</SPAN></SPAN></FONT></FONT></SPAN></FONT><FONT COLOR="#000000"><SPAN STYLE="text-decoration: none"><FONT FACE="Arial, sans-serif"><FONT SIZE=2 STYLE="font-size: 11pt"><SPAN STYLE="font-style: normal"><SPAN STYLE="font-weight: normal">have</SPAN></SPAN></FONT></FONT></SPAN></FONT><FONT COLOR="#000000"><SPAN STYLE="text-decoration: none"><FONT FACE="Arial, sans-serif"><FONT SIZE=2 STYLE="font-size: 11pt"><SPAN STYLE="font-style: normal"><SPAN STYLE="font-weight: normal">
</SPAN></SPAN></FONT></FONT></SPAN></FONT><FONT COLOR="#000000"><SPAN STYLE="text-decoration: none"><FONT FACE="Arial, sans-serif"><FONT SIZE=2 STYLE="font-size: 11pt"><SPAN STYLE="font-style: normal"><SPAN STYLE="font-weight: normal">to</SPAN></SPAN></FONT></FONT></SPAN></FONT><FONT COLOR="#000000"><SPAN STYLE="text-decoration: none"><FONT FACE="Arial, sans-serif"><FONT SIZE=2 STYLE="font-size: 11pt"><SPAN STYLE="font-style: normal"><SPAN STYLE="font-weight: normal">
</SPAN></SPAN></FONT></FONT></SPAN></FONT><FONT COLOR="#000000"><SPAN STYLE="text-decoration: none"><FONT FACE="Arial, sans-serif"><FONT SIZE=2 STYLE="font-size: 11pt"><SPAN STYLE="font-style: normal"><SPAN STYLE="font-weight: normal">run</SPAN></SPAN></FONT></FONT></SPAN></FONT><FONT COLOR="#000000"><SPAN STYLE="text-decoration: none"><FONT FACE="Arial, sans-serif"><FONT SIZE=2 STYLE="font-size: 11pt"><SPAN STYLE="font-style: normal"><SPAN STYLE="font-weight: normal">
</SPAN></SPAN></FONT></FONT></SPAN></FONT><FONT COLOR="#000000"><SPAN STYLE="text-decoration: none"><FONT FACE="Arial, sans-serif"><FONT SIZE=2 STYLE="font-size: 11pt"><SPAN STYLE="font-style: normal"><SPAN STYLE="font-weight: normal">a</SPAN></SPAN></FONT></FONT></SPAN></FONT><FONT COLOR="#000000"><SPAN STYLE="text-decoration: none"><FONT FACE="Arial, sans-serif"><FONT SIZE=2 STYLE="font-size: 11pt"><SPAN STYLE="font-style: normal"><SPAN STYLE="font-weight: normal">
</SPAN></SPAN></FONT></FONT></SPAN></FONT><FONT COLOR="#000000"><SPAN STYLE="text-decoration: none"><FONT FACE="Arial, sans-serif"><FONT SIZE=2 STYLE="font-size: 11pt"><SPAN STYLE="font-style: normal"><SPAN STYLE="font-weight: normal">simple</SPAN></SPAN></FONT></FONT></SPAN></FONT><FONT COLOR="#000000"><SPAN STYLE="text-decoration: none"><FONT FACE="Arial, sans-serif"><FONT SIZE=2 STYLE="font-size: 11pt"><SPAN STYLE="font-style: normal"><SPAN STYLE="font-weight: normal">
</SPAN></SPAN></FONT></FONT></SPAN></FONT><FONT COLOR="#000000"><SPAN STYLE="text-decoration: none"><FONT FACE="Arial, sans-serif"><FONT SIZE=2 STYLE="font-size: 11pt"><SPAN STYLE="font-style: normal"><SPAN STYLE="font-weight: normal">routing</SPAN></SPAN></FONT></FONT></SPAN></FONT><FONT COLOR="#000000"><SPAN STYLE="text-decoration: none"><FONT FACE="Arial, sans-serif"><FONT SIZE=2 STYLE="font-size: 11pt"><SPAN STYLE="font-style: normal"><SPAN STYLE="font-weight: normal">
</SPAN></SPAN></FONT></FONT></SPAN></FONT><FONT COLOR="#000000"><SPAN STYLE="text-decoration: none"><FONT FACE="Arial, sans-serif"><FONT SIZE=2 STYLE="font-size: 11pt"><SPAN STYLE="font-style: normal"><SPAN STYLE="font-weight: normal">algorithm</SPAN></SPAN></FONT></FONT></SPAN></FONT><FONT COLOR="#000000"><SPAN STYLE="text-decoration: none"><FONT FACE="Arial, sans-serif"><FONT SIZE=2 STYLE="font-size: 11pt"><SPAN STYLE="font-style: normal"><SPAN STYLE="font-weight: normal">,
</SPAN></SPAN></FONT></FONT></SPAN></FONT><FONT COLOR="#000000"><SPAN STYLE="text-decoration: none"><FONT FACE="Arial, sans-serif"><FONT SIZE=2 STYLE="font-size: 11pt"><SPAN STYLE="font-style: normal"><SPAN STYLE="font-weight: normal">such</SPAN></SPAN></FONT></FONT></SPAN></FONT><FONT COLOR="#000000"><SPAN STYLE="text-decoration: none"><FONT FACE="Arial, sans-serif"><FONT SIZE=2 STYLE="font-size: 11pt"><SPAN STYLE="font-style: normal"><SPAN STYLE="font-weight: normal">
</SPAN></SPAN></FONT></FONT></SPAN></FONT><FONT COLOR="#000000"><SPAN STYLE="text-decoration: none"><FONT FACE="Arial, sans-serif"><FONT SIZE=2 STYLE="font-size: 11pt"><SPAN STYLE="font-style: normal"><SPAN STYLE="font-weight: normal">as</SPAN></SPAN></FONT></FONT></SPAN></FONT><FONT COLOR="#000000"><SPAN STYLE="text-decoration: none"><FONT FACE="Arial, sans-serif"><FONT SIZE=2 STYLE="font-size: 11pt"><SPAN STYLE="font-style: normal"><SPAN STYLE="font-weight: normal">
</SPAN></SPAN></FONT></FONT></SPAN></FONT><FONT COLOR="#000000"><SPAN STYLE="text-decoration: none"><FONT FACE="Arial, sans-serif"><FONT SIZE=2 STYLE="font-size: 11pt"><SPAN STYLE="font-style: normal"><SPAN STYLE="font-weight: normal">Dijkstra</SPAN></SPAN></FONT></FONT></SPAN></FONT><FONT COLOR="#000000"><SPAN STYLE="text-decoration: none"><FONT FACE="Arial, sans-serif"><FONT SIZE=2 STYLE="font-size: 11pt"><SPAN STYLE="font-style: normal"><SPAN STYLE="font-weight: normal">'</SPAN></SPAN></FONT></FONT></SPAN></FONT><FONT COLOR="#000000"><SPAN STYLE="text-decoration: none"><FONT FACE="Arial, sans-serif"><FONT SIZE=2 STYLE="font-size: 11pt"><SPAN STYLE="font-style: normal"><SPAN STYLE="font-weight: normal">s</SPAN></SPAN></FONT></FONT></SPAN></FONT><FONT COLOR="#000000"><SPAN STYLE="text-decoration: none"><FONT FACE="Arial, sans-serif"><FONT SIZE=2 STYLE="font-size: 11pt"><SPAN STYLE="font-style: normal"><SPAN STYLE="font-weight: normal">
</SPAN></SPAN></FONT></FONT></SPAN></FONT><FONT COLOR="#000000"><SPAN STYLE="text-decoration: none"><FONT FACE="Arial, sans-serif"><FONT SIZE=2 STYLE="font-size: 11pt"><SPAN STYLE="font-style: normal"><SPAN STYLE="font-weight: normal">algorithm</SPAN></SPAN></FONT></FONT></SPAN></FONT><FONT COLOR="#000000"><SPAN STYLE="text-decoration: none"><FONT FACE="Arial, sans-serif"><FONT SIZE=2 STYLE="font-size: 11pt"><SPAN STYLE="font-style: normal"><SPAN STYLE="font-weight: normal">,
</SPAN></SPAN></FONT></FONT></SPAN></FONT><FONT COLOR="#000000"><SPAN STYLE="text-decoration: none"><FONT FACE="Arial, sans-serif"><FONT SIZE=2 STYLE="font-size: 11pt"><SPAN STYLE="font-style: normal"><SPAN STYLE="font-weight: normal">in</SPAN></SPAN></FONT></FONT></SPAN></FONT><FONT COLOR="#000000"><SPAN STYLE="text-decoration: none"><FONT FACE="Arial, sans-serif"><FONT SIZE=2 STYLE="font-size: 11pt"><SPAN STYLE="font-style: normal"><SPAN STYLE="font-weight: normal">
</SPAN></SPAN></FONT></FONT></SPAN></FONT><FONT COLOR="#000000"><SPAN STYLE="text-decoration: none"><FONT FACE="Arial, sans-serif"><FONT SIZE=2 STYLE="font-size: 11pt"><SPAN STYLE="font-style: normal"><SPAN STYLE="font-weight: normal">order</SPAN></SPAN></FONT></FONT></SPAN></FONT><FONT COLOR="#000000"><SPAN STYLE="text-decoration: none"><FONT FACE="Arial, sans-serif"><FONT SIZE=2 STYLE="font-size: 11pt"><SPAN STYLE="font-style: normal"><SPAN STYLE="font-weight: normal">
</SPAN></SPAN></FONT></FONT></SPAN></FONT><FONT COLOR="#000000"><SPAN STYLE="text-decoration: none"><FONT FACE="Arial, sans-serif"><FONT SIZE=2 STYLE="font-size: 11pt"><SPAN STYLE="font-style: normal"><SPAN STYLE="font-weight: normal">to</SPAN></SPAN></FONT></FONT></SPAN></FONT><FONT COLOR="#000000"><SPAN STYLE="text-decoration: none"><FONT FACE="Arial, sans-serif"><FONT SIZE=2 STYLE="font-size: 11pt"><SPAN STYLE="font-style: normal"><SPAN STYLE="font-weight: normal">
</SPAN></SPAN></FONT></FONT></SPAN></FONT><FONT COLOR="#000000"><SPAN STYLE="text-decoration: none"><FONT FACE="Arial, sans-serif"><FONT SIZE=2 STYLE="font-size: 11pt"><SPAN STYLE="font-style: normal"><SPAN STYLE="font-weight: normal">find</SPAN></SPAN></FONT></FONT></SPAN></FONT><FONT COLOR="#000000"><SPAN STYLE="text-decoration: none"><FONT FACE="Arial, sans-serif"><FONT SIZE=2 STYLE="font-size: 11pt"><SPAN STYLE="font-style: normal"><SPAN STYLE="font-weight: normal">
</SPAN></SPAN></FONT></FONT></SPAN></FONT><FONT COLOR="#000000"><SPAN STYLE="text-decoration: none"><FONT FACE="Arial, sans-serif"><FONT SIZE=2 STYLE="font-size: 11pt"><SPAN STYLE="font-style: normal"><SPAN STYLE="font-weight: normal">the</SPAN></SPAN></FONT></FONT></SPAN></FONT><FONT COLOR="#000000"><SPAN STYLE="text-decoration: none"><FONT FACE="Arial, sans-serif"><FONT SIZE=2 STYLE="font-size: 11pt"><SPAN STYLE="font-style: normal"><SPAN STYLE="font-weight: normal">
</SPAN></SPAN></FONT></FONT></SPAN></FONT><FONT COLOR="#000000"><SPAN STYLE="text-decoration: none"><FONT FACE="Arial, sans-serif"><FONT SIZE=2 STYLE="font-size: 11pt"><SPAN STYLE="font-style: normal"><SPAN STYLE="font-weight: normal">next</SPAN></SPAN></FONT></FONT></SPAN></FONT><FONT COLOR="#000000"><SPAN STYLE="text-decoration: none"><FONT FACE="Arial, sans-serif"><FONT SIZE=2 STYLE="font-size: 11pt"><SPAN STYLE="font-style: normal"><SPAN STYLE="font-weight: normal">
</SPAN></SPAN></FONT></FONT></SPAN></FONT><FONT COLOR="#000000"><SPAN STYLE="text-decoration: none"><FONT FACE="Arial, sans-serif"><FONT SIZE=2 STYLE="font-size: 11pt"><SPAN STYLE="font-style: normal"><SPAN STYLE="font-weight: normal">hop</SPAN></SPAN></FONT></FONT></SPAN></FONT><FONT COLOR="#000000"><SPAN STYLE="text-decoration: none"><FONT FACE="Arial, sans-serif"><FONT SIZE=2 STYLE="font-size: 11pt"><SPAN STYLE="font-style: normal"><SPAN STYLE="font-weight: normal">
</SPAN></SPAN></FONT></FONT></SPAN></FONT><FONT COLOR="#000000"><SPAN STYLE="text-decoration: none"><FONT FACE="Arial, sans-serif"><FONT SIZE=2 STYLE="font-size: 11pt"><SPAN STYLE="font-style: normal"><SPAN STYLE="font-weight: normal">proxy</SPAN></SPAN></FONT></FONT></SPAN></FONT><FONT COLOR="#000000"><SPAN STYLE="text-decoration: none"><FONT FACE="Arial, sans-serif"><FONT SIZE=2 STYLE="font-size: 11pt"><SPAN STYLE="font-style: normal"><SPAN STYLE="font-weight: normal">.
</SPAN></SPAN></FONT></FONT></SPAN></FONT>
</P>
<P ALIGN=JUSTIFY STYLE="margin-bottom: 0in; font-style: normal; font-weight: normal; line-height: 115%; text-decoration: none">
<BR>
</P>
<P STYLE="margin-bottom: 0in"><FONT FACE="Arial, sans-serif"><B>Forwarding
Packets</B></FONT></P>
<P STYLE="margin-bottom: 0in"><BR>
</P>
<P ALIGN=JUSTIFY STYLE="margin-bottom: 0in; line-height: 115%"><FONT COLOR="#000000"><SPAN STYLE="text-decoration: none"><FONT FACE="Arial, sans-serif"><FONT SIZE=2 STYLE="font-size: 11pt"><SPAN STYLE="font-style: normal"><SPAN STYLE="font-weight: normal">When
a layer-2 packet is received from the local TAP device it must look
up the next hop in the forwarding table, encapsulate the layer-2
packet in a VLAN packet type, and then send the packet over the
appropriate socket connection. For part 2, packets do not need
further routing. </SPAN></SPAN></FONT></FONT></SPAN></FONT>
</P>
<P ALIGN=JUSTIFY STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P ALIGN=JUSTIFY STYLE="margin-bottom: 0in; line-height: 115%"><FONT COLOR="#000000"><SPAN STYLE="text-decoration: none"><FONT FACE="Arial, sans-serif"><FONT SIZE=2 STYLE="font-size: 11pt"><SPAN STYLE="font-style: normal"><SPAN STYLE="font-weight: normal">When
a peer for part 2 accepts a packet on the TCP link, it should decode
the packet type, but can assume all data packets are for the local
TAP device. For part 3, when a packet arrives over TCP socket the
proxy will also have to look up the destination in the forwarding
table, and possibly forward the packet out another TCP connection;
e.g., it may not go through the local  TAP device at all. For part 3,
some proxies in the system will thus act as </SPAN></SPAN></FONT></FONT></SPAN></FONT><FONT COLOR="#000000"><SPAN STYLE="text-decoration: none"><FONT FACE="Arial, sans-serif"><FONT SIZE=2 STYLE="font-size: 11pt"><I><SPAN STYLE="font-weight: normal">bridging
nodes,</SPAN></I></FONT></FONT></SPAN></FONT><FONT COLOR="#000000"><SPAN STYLE="text-decoration: none"><FONT FACE="Arial, sans-serif"><FONT SIZE=2 STYLE="font-size: 11pt"><SPAN STYLE="font-style: normal"><SPAN STYLE="font-weight: normal">
and thus not be connected to a local network device. </SPAN></SPAN></FONT></FONT></SPAN></FONT>
</P>
<P ALIGN=JUSTIFY STYLE="margin-top: 0.19in; margin-bottom: 0.06in; line-height: 115%"><A NAME="h.yxqc5ck3gyms"></A>
<FONT COLOR="#000000"><SPAN STYLE="text-decoration: none"><FONT FACE="Arial, sans-serif"><FONT SIZE=4><SPAN STYLE="font-style: normal"><B>Project</B></SPAN></FONT></FONT></SPAN></FONT><FONT COLOR="#000000"><SPAN STYLE="text-decoration: none"><FONT FACE="Arial, sans-serif"><FONT SIZE=4><SPAN STYLE="font-style: normal"><B>
</B></SPAN></FONT></FONT></SPAN></FONT><FONT COLOR="#000000"><SPAN STYLE="text-decoration: none"><FONT FACE="Arial, sans-serif"><FONT SIZE=4><SPAN STYLE="font-style: normal"><B>Part</B></SPAN></FONT></FONT></SPAN></FONT><FONT COLOR="#000000"><SPAN STYLE="text-decoration: none"><FONT FACE="Arial, sans-serif"><FONT SIZE=4><SPAN STYLE="font-style: normal"><B>
2: </B></SPAN></FONT></FONT></SPAN></FONT><FONT COLOR="#000000"><SPAN STYLE="text-decoration: none"><FONT FACE="Arial, sans-serif"><FONT SIZE=4><SPAN STYLE="font-style: normal"><B>Details</B></SPAN></FONT></FONT></SPAN></FONT><FONT COLOR="#000000"><SPAN STYLE="text-decoration: none"><FONT FACE="Arial, sans-serif"><FONT SIZE=4><SPAN STYLE="font-style: normal"><B>
</B></SPAN></FONT></FONT></SPAN></FONT><FONT COLOR="#000000"><SPAN STYLE="text-decoration: none"><FONT FACE="Arial, sans-serif"><FONT SIZE=4><SPAN STYLE="font-style: normal"><B>of</B></SPAN></FONT></FONT></SPAN></FONT><FONT COLOR="#000000"><SPAN STYLE="text-decoration: none"><FONT FACE="Arial, sans-serif"><FONT SIZE=4><SPAN STYLE="font-style: normal"><B>
</B></SPAN></FONT></FONT></SPAN></FONT><FONT COLOR="#000000"><SPAN STYLE="text-decoration: none"><FONT FACE="Arial, sans-serif"><FONT SIZE=4><SPAN STYLE="font-style: normal"><B>Join</B></SPAN></FONT></FONT></SPAN></FONT><FONT COLOR="#000000"><SPAN STYLE="text-decoration: none"><FONT FACE="Arial, sans-serif"><FONT SIZE=4><SPAN STYLE="font-style: normal"><B>/</B></SPAN></FONT></FONT></SPAN></FONT><FONT COLOR="#000000"><SPAN STYLE="text-decoration: none"><FONT FACE="Arial, sans-serif"><FONT SIZE=4><SPAN STYLE="font-style: normal"><B>Leave</B></SPAN></FONT></FONT></SPAN></FONT><FONT COLOR="#000000"><SPAN STYLE="text-decoration: none"><FONT FACE="Arial, sans-serif"><FONT SIZE=4><SPAN STYLE="font-style: normal"><B>
</B></SPAN></FONT></FONT></SPAN></FONT><FONT COLOR="#000000"><SPAN STYLE="text-decoration: none"><FONT FACE="Arial, sans-serif"><FONT SIZE=4><SPAN STYLE="font-style: normal"><B>and</B></SPAN></FONT></FONT></SPAN></FONT><FONT COLOR="#000000"><SPAN STYLE="text-decoration: none"><FONT FACE="Arial, sans-serif"><FONT SIZE=4><SPAN STYLE="font-style: normal"><B>
</B></SPAN></FONT></FONT></SPAN></FONT><FONT COLOR="#000000"><SPAN STYLE="text-decoration: none"><FONT FACE="Arial, sans-serif"><FONT SIZE=4><SPAN STYLE="font-style: normal"><B>Multiple</B></SPAN></FONT></FONT></SPAN></FONT><FONT COLOR="#000000"><SPAN STYLE="text-decoration: none"><FONT FACE="Arial, sans-serif"><FONT SIZE=4><SPAN STYLE="font-style: normal"><B>
</B></SPAN></FONT></FONT></SPAN></FONT><FONT COLOR="#000000"><SPAN STYLE="text-decoration: none"><FONT FACE="Arial, sans-serif"><FONT SIZE=4><SPAN STYLE="font-style: normal"><B>peers</B></SPAN></FONT></FONT></SPAN></FONT><FONT COLOR="#000000"><SPAN STYLE="text-decoration: none"><FONT FACE="Arial, sans-serif"><FONT SIZE=4><SPAN STYLE="font-style: normal"><B>.
</B></SPAN></FONT></FONT></SPAN></FONT>
</P>
<P ALIGN=JUSTIFY STYLE="margin-bottom: 0in; line-height: 115%"><FONT COLOR="#000000"><SPAN STYLE="text-decoration: none"><FONT FACE="Arial, sans-serif"><FONT SIZE=2 STYLE="font-size: 11pt"><SPAN STYLE="font-style: normal"><SPAN STYLE="font-weight: normal">This
part of the project concentrates on maintaining the membership list
and the forwarding table. At the end of part 2, you should be able to
create a group of N proxies that implements a VLAN where  all the
proxies are directly connect to each other via a TCP socket. </SPAN></SPAN></FONT></FONT></SPAN></FONT>
</P>
<P ALIGN=JUSTIFY STYLE="margin-top: 0.17in; margin-bottom: 0in; line-height: 115%">
<FONT COLOR="#000000"><SPAN STYLE="text-decoration: none"><FONT FACE="Arial, sans-serif"><FONT SIZE=3><SPAN STYLE="font-style: normal"><B>Link
state model</B></SPAN></FONT></FONT></SPAN></FONT></P>
<P ALIGN=JUSTIFY STYLE="margin-top: 0.17in; margin-bottom: 0in; line-height: 115%">
<IMG SRC="CS352VLANParts2and3_html_37399342.png" NAME="graphics3" ALIGN=LEFT WIDTH=624 HEIGHT=168 BORDER=0><BR CLEAR=LEFT><BR>
</P>
<P ALIGN=CENTER STYLE="margin-top: 0.17in; margin-bottom: 0in; line-height: 115%">
<FONT COLOR="#000000"><SPAN STYLE="text-decoration: none"><FONT FACE="Times New Roman, serif"><FONT SIZE=2><SPAN STYLE="font-style: normal"><SPAN STYLE="font-weight: normal">Figure
1: Link State model.</SPAN></SPAN></FONT></FONT></SPAN></FONT></P>
<P ALIGN=JUSTIFY STYLE="margin-top: 0.17in; margin-bottom: 0in; line-height: 115%">
<FONT COLOR="#000000"><SPAN STYLE="text-decoration: none"><FONT FACE="Arial, sans-serif"><FONT SIZE=2 STYLE="font-size: 11pt"><SPAN STYLE="font-style: normal"><SPAN STYLE="font-weight: normal">Figure
1 shows the link-state model. The model assumes every proxy has a
listening port, an IP address and a unique MAC address. Every link
has the notion of a local side, which is the local IP address and
port of the TCP socket, and a remote IP/socket pair, which is the
addresses of the peer proxy.  A link state also has a time that is
associated with when the link was valid, and this is expressed in
milliseconds since epoch (Midnight, Jan 1, 1970). The model allows
for asymmetric links to allow the routing to deal with NAT and
firewalls. That is, the remote connection's port and IP address may
be different between the two proxies. </SPAN></SPAN></FONT></FONT></SPAN></FONT>
</P>
<P ALIGN=CENTER STYLE="margin-top: 0.17in; margin-bottom: 0in; line-height: 115%">
<IMG SRC="CS352VLANParts2and3_html_6bbe5fc6.png" NAME="graphics1" ALIGN=LEFT WIDTH=624 HEIGHT=340 BORDER=0><BR CLEAR=LEFT><BR>
</P>
<P ALIGN=CENTER STYLE="margin-top: 0.17in; margin-bottom: 0in; line-height: 115%">
<FONT COLOR="#000000"><SPAN STYLE="text-decoration: none"><FONT FACE="Times, serif"><FONT SIZE=2><SPAN STYLE="font-style: normal"><SPAN STYLE="font-weight: normal">Figure
2: example proxy set up</SPAN></SPAN></FONT></FONT></SPAN></FONT></P>
<P ALIGN=JUSTIFY STYLE="margin-top: 0.17in; margin-bottom: 0in; line-height: 115%">
<FONT COLOR="#000000"><SPAN STYLE="text-decoration: none"><FONT FACE="Arial, sans-serif"><FONT SIZE=2 STYLE="font-size: 11pt"><SPAN STYLE="font-style: normal"><SPAN STYLE="font-weight: normal">Figure
2 shows a realistic example, with 3 proxies. The 3 proxies would
result in 6 link-state records, which are the TCP socket connections
as shown in arrows A-F. The above figure also would mirror the
directed graph that would get constructed from the link-states. Note
that the link-state for a node can consist of the IP and port for a
different interface than the MAC address </SPAN></SPAN></FONT></FONT></SPAN></FONT><FONT COLOR="#000000"><SPAN STYLE="text-decoration: none"><FONT FACE="Arial, sans-serif"><FONT SIZE=2 STYLE="font-size: 11pt"><SPAN STYLE="font-style: normal"><SPAN STYLE="font-weight: normal">on
that interface. For example, for the link state for arrow A  would
consist of the MAC addresses from the tap0 interface, but the IP and
port numbers from the eth0 interface, because this is the TCP/IP
socket that the proxies would be connected on.  </SPAN></SPAN></FONT></FONT></SPAN></FONT>
</P>
<P ALIGN=JUSTIFY STYLE="margin-top: 0.17in; margin-bottom: 0in; line-height: 115%">
<BR>
</P>
<P ALIGN=CENTER STYLE="margin-top: 0.17in; margin-bottom: 0in; line-height: 115%">
<IMG SRC="CS352VLANParts2and3_html_m1ede8d57.png" NAME="graphics2" ALIGN=LEFT WIDTH=289 HEIGHT=197 BORDER=0><BR CLEAR=LEFT><FONT COLOR="#000000"><SPAN STYLE="text-decoration: none"><FONT FACE="Times, serif"><FONT SIZE=2><SPAN STYLE="font-style: normal"><SPAN STYLE="font-weight: normal">Figure
3: Link state for connection A, or the TCP socket from the proxy
running on machine 1 to the proxy running on machine 2. </SPAN></SPAN></FONT></FONT></SPAN></FONT>
</P>
<P ALIGN=CENTER STYLE="margin-top: 0.17in; margin-bottom: 0in; line-height: 115%">
<BR>
</P>
<P ALIGN=JUSTIFY STYLE="margin-top: 0.17in; margin-bottom: 0in; line-height: 115%">
<FONT COLOR="#000000"><SPAN STYLE="text-decoration: none"><FONT FACE="Arial, sans-serif"><FONT SIZE=2 STYLE="font-size: 11pt"><SPAN STYLE="font-style: normal"><SPAN STYLE="font-weight: normal">Also,
the question arises what the do for proxies that act as forwarding
nodes. In Figure 2, the proxy running on cs352-XX would be a
forwarding proxy. In this case, it can advertise its MAC address on
eth0 as the layer 2 address, but it would not actually open the eth0
device to send and receive packets from. Packets destined for this
interface should be dropped. </SPAN></SPAN></FONT></FONT></SPAN></FONT><FONT COLOR="#000000"><SPAN STYLE="text-decoration: none"><FONT FACE="Arial, sans-serif"><FONT SIZE=2 STYLE="font-size: 11pt"><SPAN STYLE="font-style: normal"><SPAN STYLE="font-weight: normal">A
simple way to construct the link state is to read the local and
remote addresses from the  socket. In C, you would use the 
</SPAN></SPAN></FONT></FONT></SPAN></FONT><FONT FACE="Courier New, monospace"><SPAN STYLE="font-weight: normal">getsockname()</SPAN></FONT><FONT COLOR="#000000"><SPAN STYLE="text-decoration: none"><FONT FACE="Courier New, monospace"><FONT SIZE=2 STYLE="font-size: 11pt"><SPAN STYLE="font-style: normal"><SPAN STYLE="font-weight: normal">
</SPAN></SPAN></FONT></FONT></SPAN></FONT><FONT COLOR="#000000"><SPAN STYLE="text-decoration: none"><FONT FACE="Arial, sans-serif"><FONT SIZE=2 STYLE="font-size: 11pt"><SPAN STYLE="font-style: normal"><SPAN STYLE="font-weight: normal">and
</SPAN></SPAN></FONT></FONT></SPAN></FONT><FONT COLOR="#000000"><SPAN STYLE="text-decoration: none"><FONT FACE="Courier New, monospace"><FONT SIZE=2 STYLE="font-size: 11pt"><SPAN STYLE="font-style: normal"><SPAN STYLE="font-weight: normal">getpeername()</SPAN></SPAN></FONT></FONT></SPAN></FONT><FONT COLOR="#000000"><SPAN STYLE="text-decoration: none"><FONT FACE="Arial, sans-serif"><FONT SIZE=2 STYLE="font-size: 11pt"><SPAN STYLE="font-style: normal"><SPAN STYLE="font-weight: normal">
calls on the socket. </SPAN></SPAN></FONT></FONT></SPAN></FONT>
</P>
<P ALIGN=JUSTIFY STYLE="margin-top: 0.17in; margin-bottom: 0in; line-height: 115%">
<FONT COLOR="#000000"><SPAN STYLE="text-decoration: none"><FONT FACE="Arial, sans-serif"><FONT SIZE=2 STYLE="font-size: 11pt"><SPAN STYLE="font-style: normal"><SPAN STYLE="font-weight: normal">The
link also has a performance metric. In this project, the metric is
the round trip time measured in microseconds. The metric is used for
routing, that is each link has a value that can be used to compute
the shortest path.</SPAN></SPAN></FONT></FONT></SPAN></FONT></P>
<P ALIGN=JUSTIFY STYLE="margin-top: 0.17in; margin-bottom: 0in; line-height: 115%"><A NAME="h.epg6hec3x6iz"></A>
<FONT COLOR="#000000"><SPAN STYLE="text-decoration: none"><FONT FACE="Arial, sans-serif"><FONT SIZE=2 STYLE="font-size: 11pt"><SPAN STYLE="font-style: normal"><B>Initial</B></SPAN></FONT></FONT></SPAN></FONT><FONT COLOR="#000000"><SPAN STYLE="text-decoration: none"><FONT FACE="Arial, sans-serif"><FONT SIZE=2 STYLE="font-size: 11pt"><SPAN STYLE="font-style: normal"><B>
Join </B></SPAN></FONT></FONT></SPAN></FONT>
</P>
<P ALIGN=JUSTIFY STYLE="margin-top: 0.17in; margin-bottom: 0in; line-height: 115%"><A NAME="h.7h7xskz0042"></A>
<FONT COLOR="#000000"><SPAN STYLE="text-decoration: none"><FONT FACE="Arial, sans-serif"><FONT SIZE=2 STYLE="font-size: 11pt"><SPAN STYLE="font-style: normal"><SPAN STYLE="font-weight: normal">A</SPAN></SPAN></FONT></FONT></SPAN></FONT><FONT COLOR="#000000"><SPAN STYLE="text-decoration: none"><FONT FACE="Arial, sans-serif"><FONT SIZE=2 STYLE="font-size: 11pt"><SPAN STYLE="font-style: normal"><SPAN STYLE="font-weight: normal">
proxy must act both as a server and a client.  That is, it must
accept incoming TCP  connections from other proxies, as well as
generate outgoing TCP connections. The sequence of actions to
maintain the membership list when the proxy is receiving an incoming
connection is called the </SPAN></SPAN></FONT></FONT></SPAN></FONT><FONT COLOR="#000000"><SPAN STYLE="text-decoration: none"><FONT FACE="Arial, sans-serif"><FONT SIZE=2 STYLE="font-size: 11pt"><I><SPAN STYLE="font-weight: normal">server
path </SPAN></I></FONT></FONT></SPAN></FONT><FONT COLOR="#000000"><SPAN STYLE="text-decoration: none"><FONT FACE="Arial, sans-serif"><FONT SIZE=2 STYLE="font-size: 11pt"><SPAN STYLE="font-style: normal"><SPAN STYLE="font-weight: normal">and
when it generating an outbound connection is called the</SPAN></SPAN></FONT></FONT></SPAN></FONT><FONT COLOR="#000000"><SPAN STYLE="text-decoration: none"><FONT FACE="Arial, sans-serif"><FONT SIZE=2 STYLE="font-size: 11pt"><I><SPAN STYLE="font-weight: normal">
client path.</SPAN></I></FONT></FONT></SPAN></FONT><FONT COLOR="#000000"><SPAN STYLE="text-decoration: none"><FONT FACE="Arial, sans-serif"><FONT SIZE=2 STYLE="font-size: 11pt"><SPAN STYLE="font-style: normal"><SPAN STYLE="font-weight: normal">
</SPAN></SPAN></FONT></FONT></SPAN></FONT>
</P>
<P ALIGN=JUSTIFY STYLE="margin-top: 0.17in; margin-bottom: 0.03in; line-height: 115%"><A NAME="h.dalkbrx3nrgw"></A>
<FONT COLOR="#000000"><SPAN STYLE="text-decoration: none"><FONT FACE="Arial, sans-serif"><FONT SIZE=2 STYLE="font-size: 11pt"><SPAN STYLE="font-style: normal"><B>Client</B></SPAN></FONT></FONT></SPAN></FONT><FONT COLOR="#000000"><SPAN STYLE="text-decoration: none"><FONT FACE="Arial, sans-serif"><FONT SIZE=2 STYLE="font-size: 11pt"><SPAN STYLE="font-style: normal"><B>
path:</B></SPAN></FONT></FONT></SPAN></FONT><FONT COLOR="#000000"><SPAN STYLE="text-decoration: none"><FONT FACE="Arial, sans-serif"><FONT SIZE=2 STYLE="font-size: 11pt"><SPAN STYLE="font-style: normal"><SPAN STYLE="font-weight: normal">
When a proxy first starts up, it needs the IP address of at least 1
peer, which it will get from a configuration file. The first argument
on the command line is the name of the configuration file.  The file
may contain multiple peers to connect at start up. See the
configuration file description for a description of the structure of
this file. </SPAN></SPAN></FONT></FONT></SPAN></FONT>
</P>
<P ALIGN=JUSTIFY STYLE="margin-bottom: 0in; font-style: normal; font-weight: normal; line-height: 115%; text-decoration: none">
<BR>
</P>
<P ALIGN=JUSTIFY STYLE="margin-bottom: 0in; line-height: 115%"><FONT COLOR="#000000"><SPAN STYLE="text-decoration: none"><FONT FACE="Arial, sans-serif"><FONT SIZE=2 STYLE="font-size: 11pt"><SPAN STYLE="font-style: normal"><B>Server
path:</B></SPAN></FONT></FONT></SPAN></FONT><FONT COLOR="#000000"><SPAN STYLE="text-decoration: none"><FONT FACE="Arial, sans-serif"><FONT SIZE=2 STYLE="font-size: 11pt"><SPAN STYLE="font-style: normal"><SPAN STYLE="font-weight: normal">
After accepting a connection on the listening port, the serving proxy
waits for a link state packet with 1 record. If the first packet is
not a single record link state packet, the proxy will close the
connection. If it is, it adds the client in the to the membership
list. The server then </SPAN></SPAN></FONT></FONT></SPAN></FONT><FONT COLOR="#000000"><SPAN STYLE="text-decoration: none"><FONT FACE="Arial, sans-serif"><FONT SIZE=2 STYLE="font-size: 11pt"><SPAN STYLE="font-style: normal"><SPAN STYLE="font-weight: normal">generates
it's own link state packet to send back to the client proxy over the
same incoming </SPAN></SPAN></FONT></FONT></SPAN></FONT><FONT COLOR="#000000"><SPAN STYLE="text-decoration: none"><FONT FACE="Arial, sans-serif"><FONT SIZE=2 STYLE="font-size: 11pt"><SPAN STYLE="font-style: normal"><SPAN STYLE="font-weight: normal">socket
(which will be handled by NAT). The RTT should be set to 1 and the
timestamp set to the current time.</SPAN></SPAN></FONT></FONT></SPAN></FONT></P>
<P ALIGN=JUSTIFY STYLE="margin-bottom: 0in; font-style: normal; font-weight: normal; line-height: 115%; text-decoration: none">
<BR>
</P>
<P ALIGN=JUSTIFY STYLE="margin-bottom: 0in; line-height: 115%"><FONT COLOR="#000000"><SPAN STYLE="text-decoration: none"><FONT FACE="Arial, sans-serif"><FONT SIZE=2 STYLE="font-size: 11pt"><SPAN STYLE="font-style: normal"><B>Actions
on receiving a link state packet: </B></SPAN></FONT></FONT></SPAN></FONT><FONT COLOR="#000000"><SPAN STYLE="text-decoration: none"><FONT FACE="Arial, sans-serif"><FONT SIZE=2 STYLE="font-size: 11pt"><SPAN STYLE="font-style: normal"><SPAN STYLE="font-weight: normal">A
link state packet contains the list of link-state records for a
proxy. For each record in the packet, the receiver checks the local
and remote MAC addresses against itâ€™s membership list. If either is
not on this list, the receiving proxy tries to connect to the
reported IP address in the record. If this </SPAN></SPAN></FONT></FONT></SPAN></FONT><FONT COLOR="#000000"><SPAN STYLE="text-decoration: none"><FONT FACE="Courier New, monospace"><FONT SIZE=2 STYLE="font-size: 11pt"><SPAN STYLE="font-style: normal"><SPAN STYLE="font-weight: normal">connect()</SPAN></SPAN></FONT></FONT></SPAN></FONT><FONT COLOR="#000000"><SPAN STYLE="text-decoration: none"><FONT FACE="Arial, sans-serif"><FONT SIZE=2 STYLE="font-size: 11pt"><SPAN STYLE="font-style: normal"><SPAN STYLE="font-weight: normal">
call  fails, the two proxies remain disconnected. </SPAN></SPAN></FONT></FONT></SPAN></FONT>
</P>
<P ALIGN=JUSTIFY STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P ALIGN=JUSTIFY STYLE="margin-bottom: 0in; line-height: 115%"><FONT COLOR="#000000"><SPAN STYLE="text-decoration: none"><FONT FACE="Arial, sans-serif"><FONT SIZE=2 STYLE="font-size: 11pt"><SPAN STYLE="font-style: normal"><SPAN STYLE="font-weight: normal">If
the ID of a packet and MAC address is already in the list, then the
proxy checks it's arrival time  to see if the packet is older than
the last link state record received from a particular mac address. If
the ID of the received record is smaller using modulo arithmetic, the
record is discarded.  </SPAN></SPAN></FONT></FONT></SPAN></FONT>
</P>
<P ALIGN=JUSTIFY STYLE="margin-top: 0.17in; margin-bottom: 0.03in; line-height: 115%">
<FONT COLOR="#000000"><SPAN STYLE="text-decoration: none"><FONT FACE="Arial, sans-serif"><FONT SIZE=3><SPAN STYLE="font-style: normal"><B>Maintaining
the Membership list.</B></SPAN></FONT></FONT></SPAN></FONT></P>
<P ALIGN=JUSTIFY STYLE="margin-bottom: 0in; line-height: 115%"><FONT COLOR="#000000"><SPAN STYLE="text-decoration: none"><FONT FACE="Arial, sans-serif"><FONT SIZE=2 STYLE="font-size: 11pt"><SPAN STYLE="font-style: normal"><SPAN STYLE="font-weight: normal">Leaving
is accomplished through a special packet type, called </SPAN></SPAN></FONT></FONT></SPAN></FONT><FONT COLOR="#000000"><SPAN STYLE="text-decoration: none"><FONT FACE="Courier New, monospace"><FONT SIZE=2 STYLE="font-size: 11pt"><SPAN STYLE="font-style: normal"><SPAN STYLE="font-weight: normal">leave</SPAN></SPAN></FONT></FONT></SPAN></FONT><FONT COLOR="#000000"><SPAN STYLE="text-decoration: none"><FONT FACE="Courier 10 Pitch"><FONT SIZE=2 STYLE="font-size: 11pt"><SPAN STYLE="font-style: normal"><SPAN STYLE="font-weight: normal">.
</SPAN></SPAN></FONT></FONT></SPAN></FONT><FONT COLOR="#000000"><SPAN STYLE="text-decoration: none"><FONT FACE="Arial, sans-serif"><FONT SIZE=2 STYLE="font-size: 11pt"><SPAN STYLE="font-style: normal"><SPAN STYLE="font-weight: normal">Timeouts
also control when members are removed.</SPAN></SPAN></FONT></FONT></SPAN></FONT><FONT COLOR="#000000"><SPAN STYLE="text-decoration: none"><FONT FACE="Arial, sans-serif"><FONT SIZE=2 STYLE="font-size: 11pt"><SPAN STYLE="font-style: normal"><SPAN STYLE="font-weight: normal">
 Every</SPAN></SPAN></FONT></FONT></SPAN></FONT><FONT COLOR="#000000"><SPAN STYLE="text-decoration: none"><FONT FACE="Courier New, monospace"><FONT SIZE=2 STYLE="font-size: 11pt"><SPAN STYLE="font-style: normal"><SPAN STYLE="font-weight: normal">
linkPeriod </SPAN></SPAN></FONT></FONT></SPAN></FONT><FONT COLOR="#000000"><SPAN STYLE="text-decoration: none"><FONT FACE="Arial, sans-serif"><FONT SIZE=2 STYLE="font-size: 11pt"><SPAN STYLE="font-style: normal"><SPAN STYLE="font-weight: normal">seconds
a proxy will send a link state packet, which contains all the
link-state records it owns, to all connected proxies. These link
state records are flooded throughout the system. </SPAN></SPAN></FONT></FONT></SPAN></FONT>
</P>
<P ALIGN=JUSTIFY STYLE="margin-bottom: 0in; font-style: normal; font-weight: normal; line-height: 115%; text-decoration: none">
<BR>
</P>
<P ALIGN=JUSTIFY STYLE="margin-bottom: 0in; line-height: 115%"><FONT COLOR="#000000"><SPAN STYLE="text-decoration: none"><FONT FACE="Arial, sans-serif"><FONT SIZE=2 STYLE="font-size: 11pt"><SPAN STYLE="font-style: normal"><SPAN STYLE="font-weight: normal">If
a proxy receives a </SPAN></SPAN></FONT></FONT></SPAN></FONT><FONT COLOR="#000000"><SPAN STYLE="text-decoration: none"><FONT FACE="Courier, monospace"><FONT SIZE=2 STYLE="font-size: 11pt"><SPAN STYLE="font-style: normal"><SPAN STYLE="font-weight: normal">leave</SPAN></SPAN></FONT></FONT></SPAN></FONT><FONT COLOR="#000000"><SPAN STYLE="text-decoration: none"><FONT FACE="Arial, sans-serif"><FONT SIZE=2 STYLE="font-size: 11pt"><SPAN STYLE="font-style: normal"><SPAN STYLE="font-weight: normal">
packet, it should send a leave message to all the connected proxies
if it has not seen this ID yet, close all the sockets for that peer,
and then exit.</SPAN></SPAN></FONT></FONT></SPAN></FONT><FONT COLOR="#000000"><SPAN STYLE="text-decoration: none"><FONT FACE="Arial, sans-serif"><FONT SIZE=2 STYLE="font-size: 11pt"><SPAN STYLE="font-style: normal"><SPAN STYLE="font-weight: normal">
Proxies receiving a leave message type will remove that particular
proxy from the membership list. </SPAN></SPAN></FONT></FONT></SPAN></FONT>
</P>
<P ALIGN=JUSTIFY STYLE="margin-bottom: 0in; font-style: normal; font-weight: normal; line-height: 115%; text-decoration: none">
<BR>
</P>
<P ALIGN=JUSTIFY STYLE="margin-bottom: 0in; line-height: 115%"><FONT COLOR="#000000"><SPAN STYLE="text-decoration: none"><FONT FACE="Arial, sans-serif"><FONT SIZE=2 STYLE="font-size: 11pt"><SPAN STYLE="font-style: normal"><SPAN STYLE="font-weight: normal">The
membership list should be periodically scanned to remove stale
entries. An entry is declared expired when no link state record for a
proxy has been received for </SPAN></SPAN></FONT></FONT></SPAN></FONT><FONT COLOR="#000000"><SPAN STYLE="text-decoration: none"><FONT FACE="Courier New, monospace"><FONT SIZE=2 STYLE="font-size: 11pt"><SPAN STYLE="font-style: normal"><SPAN STYLE="font-weight: normal">linkTimeout</SPAN></SPAN></FONT></FONT></SPAN></FONT><FONT COLOR="#000000"><SPAN STYLE="text-decoration: none"><FONT FACE="Arial, sans-serif"><FONT SIZE=2 STYLE="font-size: 11pt"><SPAN STYLE="font-style: normal"><SPAN STYLE="font-weight: normal">
seconds.</SPAN></SPAN></FONT></FONT></SPAN></FONT></P>
<P ALIGN=JUSTIFY STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P STYLE="margin-bottom: 0in"><FONT COLOR="#000000"><SPAN STYLE="text-decoration: none"><FONT FACE="Arial, sans-serif"><FONT SIZE=3><SPAN STYLE="font-style: normal"><B>Taking
down the whole VLAN</B></SPAN></FONT></FONT></SPAN></FONT><FONT COLOR="#000000"><SPAN STYLE="text-decoration: none"><FONT FACE="Arial, sans-serif"><FONT SIZE=2 STYLE="font-size: 11pt"><SPAN STYLE="font-style: normal"><SPAN STYLE="font-weight: normal">
</SPAN></SPAN></FONT></FONT></SPAN></FONT>
</P>
<P ALIGN=JUSTIFY STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P ALIGN=JUSTIFY STYLE="margin-bottom: 0in; line-height: 115%"><FONT COLOR="#000000"><SPAN STYLE="text-decoration: none"><FONT FACE="Arial, sans-serif"><FONT SIZE=2 STYLE="font-size: 11pt"><SPAN STYLE="font-style: normal"><SPAN STYLE="font-weight: normal">Removing
the whole VLAN is accomplished via a special </SPAN></SPAN></FONT></FONT></SPAN></FONT><FONT COLOR="#000000"><SPAN STYLE="text-decoration: none"><FONT FACE="Courier New, monospace"><FONT SIZE=2 STYLE="font-size: 11pt"><SPAN STYLE="font-style: normal"><SPAN STYLE="font-weight: normal">quit</SPAN></SPAN></FONT></FONT></SPAN></FONT><FONT COLOR="#000000"><SPAN STYLE="text-decoration: none"><FONT FACE="Arial, sans-serif"><FONT SIZE=2 STYLE="font-size: 11pt"><SPAN STYLE="font-style: normal"><SPAN STYLE="font-weight: normal">
packet.  If a node receives this packet type, it should forward it to
all connected peers, close all the sockets, and then exit. </SPAN></SPAN></FONT></FONT></SPAN></FONT>
</P>
<P ALIGN=LEFT STYLE="margin-bottom: 0in; font-style: normal; font-weight: normal; line-height: 115%; text-decoration: none">
<BR>
</P>
<P STYLE="margin-bottom: 0in"><FONT FACE="Arial, sans-serif"><FONT SIZE=3><B>Flooding
Link State Records. </B></FONT></FONT>
</P>
<P ALIGN=LEFT STYLE="margin-bottom: 0in; font-style: normal; font-weight: normal; line-height: 115%; text-decoration: none">
<BR>
</P>
<P ALIGN=LEFT STYLE="margin-bottom: 0in; font-style: normal; font-weight: normal; line-height: 115%; text-decoration: none">
<FONT FACE="Arial, sans-serif"><FONT SIZE=2 STYLE="font-size: 11pt">The
proxies will flood link state records using a hybrid strategy. In a
highly connected topology, it is better to do bulk exchanges rather
than flooding. Each link state record is unique, but whole sets of
records will be transferred between pairs of proxies in bulk. Upon
receiving a neighbor's link state records, a node will check for
duplicates in its link state list using the MAC and ID fields as
unique identifiers, and update the list accordingly. Every 10 seconds
a proxy will send its' link state records to the neighboring
connected proxies. </FONT></FONT>
</P>
<P ALIGN=LEFT STYLE="margin-bottom: 0in; font-style: normal; font-weight: normal; line-height: 115%; text-decoration: none">
<BR>
</P>
<P ALIGN=LEFT STYLE="margin-bottom: 0in; font-style: normal; line-height: 115%; text-decoration: none">
<FONT FACE="Arial, sans-serif"><FONT SIZE=3><B>Logical threads of
control. </B></FONT></FONT>
</P>
<P ALIGN=LEFT STYLE="margin-bottom: 0in; font-style: normal; font-weight: normal; line-height: 115%; text-decoration: none">
<BR>
</P>
<P ALIGN=LEFT STYLE="margin-bottom: 0in; font-style: normal; font-weight: normal; line-height: 115%; text-decoration: none">
<FONT FACE="Arial, sans-serif"><FONT SIZE=2 STYLE="font-size: 11pt">The
proxy must handle many tasks. The logical threads of control are:</FONT></FONT></P>
<P ALIGN=LEFT STYLE="margin-bottom: 0in; font-style: normal; font-weight: normal; line-height: 115%; text-decoration: none">
<BR>
</P>
<OL>
	<LI><P ALIGN=LEFT STYLE="margin-bottom: 0in; font-style: normal; font-weight: normal; line-height: 115%; text-decoration: none">
	<FONT FACE="Arial, sans-serif"><FONT SIZE=2 STYLE="font-size: 11pt">Waiting
	for connecting proxies on the listening TCP port. </FONT></FONT>
	</P>
	<LI><P ALIGN=LEFT STYLE="margin-bottom: 0in; font-style: normal; font-weight: normal; line-height: 115%; text-decoration: none">
	<FONT FACE="Arial, sans-serif"><FONT SIZE=2 STYLE="font-size: 11pt">Reading
	packets from the local interface and forwarding them to the correct
	remote proxy via TCP. </FONT></FONT>
	</P>
	<LI><P ALIGN=LEFT STYLE="margin-bottom: 0in; font-style: normal; font-weight: normal; line-height: 115%; text-decoration: none">
	<FONT FACE="Arial, sans-serif"><FONT SIZE=2 STYLE="font-size: 11pt">Reading
	packets from the TCP socket of a connected proxy and forwarding them
	to the local interface, or routing them to the correct peer proxy's
	TCP socket (for part 3).</FONT></FONT></P>
	<LI><P ALIGN=LEFT STYLE="margin-bottom: 0in; font-style: normal; font-weight: normal; line-height: 115%; text-decoration: none">
	<FONT FACE="Arial, sans-serif"><FONT SIZE=2 STYLE="font-size: 11pt">Periodically:
	</FONT></FONT>
	</P>
	<OL>
		<LI><P ALIGN=LEFT STYLE="margin-bottom: 0in; font-style: normal; font-weight: normal; line-height: 115%; text-decoration: none">
		<FONT FACE="Arial, sans-serif"><FONT SIZE=2 STYLE="font-size: 11pt">Checking
		for expired membership list  and link state entries.</FONT></FONT></P>
		<LI><P ALIGN=LEFT STYLE="margin-bottom: 0in; font-style: normal; font-weight: normal; line-height: 115%; text-decoration: none">
		<FONT FACE="Arial, sans-serif"><FONT SIZE=2 STYLE="font-size: 11pt">Sending
		link state packets.</FONT></FONT></P>
		<LI><P ALIGN=LEFT STYLE="margin-bottom: 0in; font-style: normal; font-weight: normal; line-height: 115%; text-decoration: none">
		<FONT FACE="Arial, sans-serif"><FONT SIZE=2 STYLE="font-size: 11pt">Sending
		probe packets to measuring the link (for part 3).</FONT></FONT></P>
		<LI><P ALIGN=LEFT STYLE="margin-bottom: 0in; font-style: normal; font-weight: normal; line-height: 115%; text-decoration: none">
		<FONT FACE="Arial, sans-serif"><FONT SIZE=2 STYLE="font-size: 11pt">Updating
		the routing graph (for part 3).</FONT></FONT></P>
	</OL>
</OL>
<P ALIGN=LEFT STYLE="margin-bottom: 0in; font-style: normal; font-weight: normal; line-height: 115%; text-decoration: none">
<BR>
</P>
<P ALIGN=LEFT STYLE="margin-bottom: 0in; line-height: 115%"><FONT COLOR="#000000"><SPAN STYLE="text-decoration: none"><FONT FACE="Arial, sans-serif"><FONT SIZE=4><SPAN STYLE="font-style: normal"><B>Project
Part 3: Routing and Network Measurement </B></SPAN></FONT></FONT></SPAN></FONT>
</P>
<P ALIGN=LEFT STYLE="margin-bottom: 0in; font-style: normal; font-weight: normal; line-height: 115%; text-decoration: none">
<BR>
</P>
<P ALIGN=LEFT STYLE="margin-bottom: 0in; line-height: 115%"><FONT COLOR="#000000"><SPAN STYLE="text-decoration: none"><FONT FACE="Arial, sans-serif"><FONT SIZE=2 STYLE="font-size: 11pt"><SPAN STYLE="font-style: normal"><SPAN STYLE="font-weight: normal">In
part 3 of the project, the proxies will be allocated on sets of
slaves that are not connected to each other and the proxy must be
routed through the masters. </SPAN></SPAN></FONT></FONT></SPAN></FONT>
</P>
<P ALIGN=LEFT STYLE="margin-bottom: 0in; font-style: normal; font-weight: normal; line-height: 115%; text-decoration: none">
<BR>
</P>
<P ALIGN=LEFT STYLE="margin-bottom: 0in; font-style: normal; line-height: 115%; text-decoration: none">
<FONT FACE="Arial, sans-serif"><FONT SIZE=3><B>Routing</B></FONT></FONT></P>
<P ALIGN=LEFT STYLE="margin-bottom: 0in; font-style: normal; font-weight: normal; line-height: 115%; text-decoration: none">
<BR>
</P>
<P ALIGN=LEFT STYLE="margin-bottom: 0in; font-style: normal; font-weight: normal; line-height: 115%; text-decoration: none">
<FONT FACE="Arial, sans-serif"><FONT SIZE=2 STYLE="font-size: 11pt">The
membership list and link state list will be used to generate a
directed graph. You will use the graph to generate a forwarding table
for the given proxy.  You should use shortest path routing where the
link cost is the RTT in milliseconds. </FONT></FONT>
</P>
<P ALIGN=LEFT STYLE="margin-bottom: 0in; font-style: normal; font-weight: normal; line-height: 115%; text-decoration: none">
  
</P>
<P ALIGN=LEFT STYLE="margin-bottom: 0in; font-style: normal; line-height: 115%; text-decoration: none">
<FONT FACE="Arial, sans-serif"><FONT SIZE=3><B>Network Measurement
and Link Cost.</B></FONT></FONT></P>
<P ALIGN=LEFT STYLE="margin-bottom: 0in; font-style: normal; font-weight: normal; line-height: 115%; text-decoration: none">
<BR>
</P>
<P ALIGN=LEFT STYLE="margin-bottom: 0in; font-style: normal; font-weight: normal; line-height: 115%; text-decoration: none">
<FONT FACE="Arial, sans-serif"><FONT SIZE=2 STYLE="font-size: 11pt">In
order to route, each link needs and associated cost. For this
project, the cost will be the measured Round-Trip-Time (RTT) between
the peers. RTT will be measured every 1 second by measuring the time
between a sent probe request packet and probe response packet. The
RTT will be included in the link state between the peers. The RTT is
computed by taking a timestamp, sending probe request, and waiting
for the probe response, and recording the difference in time. </FONT></FONT>
</P>
<P ALIGN=LEFT STYLE="margin-top: 0.19in; margin-bottom: 0.06in; line-height: 115%"><A NAME="h.6ln578qhafat"></A>
<FONT COLOR="#000000"><SPAN STYLE="text-decoration: none"><FONT FACE="Arial, sans-serif"><FONT SIZE=4><SPAN STYLE="font-style: normal"><B>New
Packet </B></SPAN></FONT></FONT></SPAN></FONT><FONT COLOR="#000000"><SPAN STYLE="text-decoration: none"><FONT FACE="Arial, sans-serif"><FONT SIZE=4><SPAN STYLE="font-style: normal"><B>F</B></SPAN></FONT></FONT></SPAN></FONT><FONT COLOR="#000000"><SPAN STYLE="text-decoration: none"><FONT FACE="Arial, sans-serif"><FONT SIZE=4><SPAN STYLE="font-style: normal"><B>ormats:
</B></SPAN></FONT></FONT></SPAN></FONT>
</P>
<P STYLE="margin-bottom: 0in"><FONT COLOR="#000000"><SPAN STYLE="text-decoration: none"><FONT FACE="Arial, sans-serif"><FONT SIZE=2 STYLE="font-size: 11pt"><SPAN STYLE="font-style: normal"><SPAN STYLE="font-weight: normal">There
are 6 additional packet types the proxies will exchange in addition
to data packets from part 1.  As with part 1, the packet format
starts with the 16 bit type field, which describes the kind of packet
that is being exchanged, and the length field, which describes how
much data follows. Both the type and length are in network byte
order, which is big-endian. The new types for part 2 are:</SPAN></SPAN></FONT></FONT></SPAN></FONT><FONT COLOR="#000000"><SPAN STYLE="text-decoration: none"><FONT FACE="Courier, monospace"><FONT SIZE=2 STYLE="font-size: 11pt"><SPAN STYLE="font-style: normal"><SPAN STYLE="font-weight: normal">
leave, link-state</SPAN></SPAN></FONT></FONT></SPAN></FONT><FONT COLOR="#000000"><SPAN STYLE="text-decoration: none"><FONT FACE="Arial, sans-serif"><FONT SIZE=2 STYLE="font-size: 11pt"><SPAN STYLE="font-style: normal"><SPAN STYLE="font-weight: normal">.
For part 3 they are: </SPAN></SPAN></FONT></FONT></SPAN></FONT><FONT COLOR="#000000"><SPAN STYLE="text-decoration: none"><FONT FACE="Courier, monospace"><FONT SIZE=2 STYLE="font-size: 11pt"><SPAN STYLE="font-style: normal"><SPAN STYLE="font-weight: normal">probe
request</SPAN></SPAN></FONT></FONT></SPAN></FONT><FONT COLOR="#000000"><SPAN STYLE="text-decoration: none"><FONT FACE="Arial, sans-serif"><FONT SIZE=2 STYLE="font-size: 11pt"><SPAN STYLE="font-style: normal"><SPAN STYLE="font-weight: normal">
and </SPAN></SPAN></FONT></FONT></SPAN></FONT><FONT COLOR="#000000"><SPAN STYLE="text-decoration: none"><FONT FACE="Courier, monospace"><FONT SIZE=2 STYLE="font-size: 11pt"><SPAN STYLE="font-style: normal"><SPAN STYLE="font-weight: normal">probe
response</SPAN></SPAN></FONT></FONT></SPAN></FONT><FONT COLOR="#000000"><SPAN STYLE="text-decoration: none"><FONT FACE="Arial, sans-serif"><FONT SIZE=2 STYLE="font-size: 11pt"><SPAN STYLE="font-style: normal"><SPAN STYLE="font-weight: normal">.
</SPAN></SPAN></FONT></FONT></SPAN></FONT>
</P>
<P STYLE="margin-bottom: 0in"><BR>
</P>
<P STYLE="margin-bottom: 0in"><FONT COLOR="#000000"><SPAN STYLE="text-decoration: none"><FONT FACE="Arial, sans-serif"><FONT SIZE=2 STYLE="font-size: 11pt"><SPAN STYLE="font-style: normal"><SPAN STYLE="font-weight: normal">All
types are listed below:</SPAN></SPAN></FONT></FONT></SPAN></FONT></P>
<P STYLE="margin-bottom: 0in"><BR>
</P>
<P ALIGN=LEFT STYLE="margin-bottom: 0in; line-height: 115%"><FONT COLOR="#000000"><SPAN STYLE="text-decoration: none"><FONT FACE="Arial, sans-serif"><FONT SIZE=2 STYLE="font-size: 11pt"><SPAN STYLE="font-style: normal"><B>Data:</B></SPAN></FONT></FONT></SPAN></FONT></P>
<P ALIGN=LEFT STYLE="margin-left: 0.5in; margin-bottom: 0in; line-height: 115%">
<FONT COLOR="#000000"><SPAN STYLE="text-decoration: none"><FONT FACE="Arial, sans-serif"><FONT SIZE=2 STYLE="font-size: 11pt"><SPAN STYLE="font-style: normal"><SPAN STYLE="font-weight: normal">Type:
(16 bit integer):  0xABCD</SPAN></SPAN></FONT></FONT></SPAN></FONT></P>
<P ALIGN=LEFT STYLE="margin-left: 0.5in; margin-bottom: 0in; line-height: 115%">
<FONT COLOR="#000000"><SPAN STYLE="text-decoration: none"><FONT FACE="Arial, sans-serif"><FONT SIZE=2 STYLE="font-size: 11pt"><SPAN STYLE="font-style: normal"><SPAN STYLE="font-weight: normal">Length:
(16 bit integer): variable, up to 2048</SPAN></SPAN></FONT></FONT></SPAN></FONT></P>
<P ALIGN=LEFT STYLE="margin-left: 0.5in; margin-bottom: 0in; line-height: 115%">
<FONT COLOR="#000000"><SPAN STYLE="text-decoration: none"><FONT FACE="Arial, sans-serif"><FONT SIZE=2 STYLE="font-size: 11pt"><SPAN STYLE="font-style: normal"><SPAN STYLE="font-weight: normal">Fields:
</SPAN></SPAN></FONT></FONT></SPAN></FONT>
</P>
<P ALIGN=LEFT STYLE="margin-left: 0.5in; margin-bottom: 0in; line-height: 115%">
<FONT COLOR="#000000"><SPAN STYLE="text-decoration: none"><FONT FACE="Arial, sans-serif"><FONT SIZE=2 STYLE="font-size: 11pt"><SPAN STYLE="font-style: normal"><SPAN STYLE="font-weight: normal">data[variable,
length as above] </SPAN></SPAN></FONT></FONT></SPAN></FONT>
</P>
<P ALIGN=LEFT STYLE="margin-bottom: 0in; font-style: normal; font-weight: normal; line-height: 115%; text-decoration: none">
<BR>
</P>
<P ALIGN=LEFT STYLE="margin-bottom: 0in; line-height: 115%"><FONT COLOR="#000000"><SPAN STYLE="text-decoration: none"><FONT FACE="Arial, sans-serif"><FONT SIZE=2 STYLE="font-size: 11pt"><SPAN STYLE="font-style: normal"><B>Leave:
</B></SPAN></FONT></FONT></SPAN></FONT>
</P>
<P ALIGN=LEFT STYLE="margin-left: 0.5in; margin-bottom: 0in; line-height: 115%">
<FONT COLOR="#000000"><SPAN STYLE="text-decoration: none"><FONT FACE="Arial, sans-serif"><FONT SIZE=2 STYLE="font-size: 11pt"><SPAN STYLE="font-style: normal"><SPAN STYLE="font-weight: normal">Type:
(16 bit integer):  0xAB01</SPAN></SPAN></FONT></FONT></SPAN></FONT></P>
<P ALIGN=LEFT STYLE="margin-left: 0.5in; margin-bottom: 0in; line-height: 115%">
<FONT COLOR="#000000"><SPAN STYLE="text-decoration: none"><FONT FACE="Arial, sans-serif"><FONT SIZE=2 STYLE="font-size: 11pt"><SPAN STYLE="font-style: normal"><SPAN STYLE="font-weight: normal">Length
(16 bit integer):  20 </SPAN></SPAN></FONT></FONT></SPAN></FONT>
</P>
<P ALIGN=LEFT STYLE="margin-left: 0.5in; margin-bottom: 0in; line-height: 115%">
<FONT COLOR="#000000"><SPAN STYLE="text-decoration: none"><FONT FACE="Arial, sans-serif"><FONT SIZE=2 STYLE="font-size: 11pt"><SPAN STYLE="font-style: normal"><SPAN STYLE="font-weight: normal">Fields:
</SPAN></SPAN></FONT></FONT></SPAN></FONT>
</P>
<P ALIGN=LEFT STYLE="margin-left: 0.5in; margin-bottom: 0in; line-height: 115%">
<FONT COLOR="#000000"><SPAN STYLE="text-decoration: none"><FONT FACE="Arial, sans-serif"><FONT SIZE=2 STYLE="font-size: 11pt"><SPAN STYLE="font-style: normal"><SPAN STYLE="font-weight: normal">Local
 IP (32 bits), local listen port  (16 bits),  local MAC address (48
bits), ID (64 bits) </SPAN></SPAN></FONT></FONT></SPAN></FONT>
</P>
<P ALIGN=LEFT STYLE="margin-left: 0.5in; margin-bottom: 0in; line-height: 115%">
<BR>
</P>
<P ALIGN=LEFT STYLE="margin-bottom: 0in; line-height: 115%"><FONT COLOR="#000000"><SPAN STYLE="text-decoration: none"><FONT FACE="Arial, sans-serif"><FONT SIZE=2 STYLE="font-size: 11pt"><SPAN STYLE="font-style: normal"><B>Quit:
</B></SPAN></FONT></FONT></SPAN></FONT>
</P>
<P ALIGN=LEFT STYLE="margin-left: 0.5in; margin-bottom: 0in; line-height: 115%">
<FONT COLOR="#000000"><SPAN STYLE="text-decoration: none"><FONT FACE="Arial, sans-serif"><FONT SIZE=2 STYLE="font-size: 11pt"><SPAN STYLE="font-style: normal"><SPAN STYLE="font-weight: normal">Type:
(16 bit integer):  0xAB12</SPAN></SPAN></FONT></FONT></SPAN></FONT></P>
<P ALIGN=LEFT STYLE="margin-left: 0.5in; margin-bottom: 0in; line-height: 115%">
<FONT COLOR="#000000"><SPAN STYLE="text-decoration: none"><FONT FACE="Arial, sans-serif"><FONT SIZE=2 STYLE="font-size: 11pt"><SPAN STYLE="font-style: normal"><SPAN STYLE="font-weight: normal">Length
(16 bit integer):  20 </SPAN></SPAN></FONT></FONT></SPAN></FONT>
</P>
<P ALIGN=LEFT STYLE="margin-left: 0.5in; margin-bottom: 0in; line-height: 115%">
<FONT COLOR="#000000"><SPAN STYLE="text-decoration: none"><FONT FACE="Arial, sans-serif"><FONT SIZE=2 STYLE="font-size: 11pt"><SPAN STYLE="font-style: normal"><SPAN STYLE="font-weight: normal">Fields:
</SPAN></SPAN></FONT></FONT></SPAN></FONT>
</P>
<P ALIGN=LEFT STYLE="margin-left: 0.5in; margin-bottom: 0in; line-height: 115%">
<FONT COLOR="#000000"><SPAN STYLE="text-decoration: none"><FONT FACE="Arial, sans-serif"><FONT SIZE=2 STYLE="font-size: 11pt"><SPAN STYLE="font-style: normal"><SPAN STYLE="font-weight: normal">Local
 IP (32 bits), local listen port  (16 bits),  local MAC address (48
bits), ID (64 bits) </SPAN></SPAN></FONT></FONT></SPAN></FONT>
</P>
<P ALIGN=LEFT STYLE="margin-bottom: 0in; font-style: normal; font-weight: normal; line-height: 115%; text-decoration: none">
<BR>
</P>
<P ALIGN=LEFT STYLE="margin-bottom: 0in; line-height: 115%"><FONT COLOR="#000000"><SPAN STYLE="text-decoration: none"><FONT FACE="Arial, sans-serif"><FONT SIZE=2 STYLE="font-size: 11pt"><SPAN STYLE="font-style: normal"><B>Link
state packet: </B></SPAN></FONT></FONT></SPAN></FONT>
</P>
<P ALIGN=LEFT STYLE="margin-bottom: 0in; line-height: 115%"><FONT COLOR="#000000"><SPAN STYLE="text-decoration: none"><FONT FACE="Arial, sans-serif"><FONT SIZE=2 STYLE="font-size: 11pt"><SPAN STYLE="font-style: normal"><B>	</B></SPAN></FONT></FONT></SPAN></FONT><FONT COLOR="#000000"><SPAN STYLE="text-decoration: none"><FONT FACE="Arial, sans-serif"><FONT SIZE=2 STYLE="font-size: 11pt"><SPAN STYLE="font-style: normal"><SPAN STYLE="font-weight: normal">Type
(16 bit int ):  0xABAC</SPAN></SPAN></FONT></FONT></SPAN></FONT></P>
<P ALIGN=LEFT STYLE="margin-bottom: 0in; line-height: 115%"><FONT COLOR="#000000"><SPAN STYLE="text-decoration: none"><FONT FACE="Arial, sans-serif"><FONT SIZE=2 STYLE="font-size: 11pt"><SPAN STYLE="font-style: normal"><SPAN STYLE="font-weight: normal">	Length:
(16 bit int): variable</SPAN></SPAN></FONT></FONT></SPAN></FONT></P>
<P ALIGN=LEFT STYLE="margin-bottom: 0in; line-height: 115%"><FONT COLOR="#000000"><SPAN STYLE="text-decoration: none"><FONT FACE="Arial, sans-serif"><FONT SIZE=2 STYLE="font-size: 11pt"><SPAN STYLE="font-style: normal"><SPAN STYLE="font-weight: normal">	Number
of neighbors (16 bit int)</SPAN></SPAN></FONT></FONT></SPAN></FONT></P>
<P ALIGN=LEFT STYLE="margin-bottom: 0in; line-height: 115%"><FONT COLOR="#000000"><SPAN STYLE="text-decoration: none"><FONT FACE="Arial, sans-serif"><FONT SIZE=2 STYLE="font-size: 11pt"><SPAN STYLE="font-style: normal"><SPAN STYLE="font-weight: normal">	Fields:
Source/Origin proxy: local  IP (32 bits),  local listen port (16
bits), source MAC (48  bits), </SPAN></SPAN></FONT></FONT></SPAN></FONT>
</P>
<P ALIGN=LEFT STYLE="margin-bottom: 0in; line-height: 115%"><FONT COLOR="#000000"><SPAN STYLE="text-decoration: none"><FONT FACE="Arial, sans-serif"><FONT SIZE=2 STYLE="font-size: 11pt"><SPAN STYLE="font-style: normal"><SPAN STYLE="font-weight: normal">	Neighbor
list, N fixed sized records below:</SPAN></SPAN></FONT></FONT></SPAN></FONT></P>
<P ALIGN=LEFT STYLE="margin-bottom: 0in; line-height: 115%"><FONT COLOR="#000000"><SPAN STYLE="text-decoration: none"><FONT FACE="Arial, sans-serif"><FONT SIZE=2 STYLE="font-size: 11pt"><SPAN STYLE="font-style: normal"><SPAN STYLE="font-weight: normal">	local
 IP (32 bits),  local listen port (16 bits), local MAC (48  bits),
remote IP (32 bits),  remote port (16 bits), remote MAC address (48
bits), average RTT (32 bit int, in micro-seconds), unique ID for this
record (64 bits). </SPAN></SPAN></FONT></FONT></SPAN></FONT>
</P>
<P ALIGN=LEFT STYLE="margin-bottom: 0in; font-style: normal; font-weight: normal; line-height: 115%; text-decoration: none">
<BR>
</P>
<P ALIGN=LEFT STYLE="margin-bottom: 0in; line-height: 115%"><FONT COLOR="#000000"><SPAN STYLE="text-decoration: none"><FONT FACE="Arial, sans-serif"><FONT SIZE=2 STYLE="font-size: 11pt"><SPAN STYLE="font-style: normal"><B>Probe
request:</B></SPAN></FONT></FONT></SPAN></FONT><FONT COLOR="#000000"><SPAN STYLE="text-decoration: none"><FONT FACE="Arial, sans-serif"><FONT SIZE=2 STYLE="font-size: 11pt"><SPAN STYLE="font-style: normal"><SPAN STYLE="font-weight: normal">
</SPAN></SPAN></FONT></FONT></SPAN></FONT>
</P>
<P ALIGN=LEFT STYLE="margin-bottom: 0in; line-height: 115%"><FONT COLOR="#000000"><SPAN STYLE="text-decoration: none"><FONT FACE="Arial, sans-serif"><FONT SIZE=2 STYLE="font-size: 11pt"><SPAN STYLE="font-style: normal"><SPAN STYLE="font-weight: normal">	Type:
(16 bits) 0xAB34</SPAN></SPAN></FONT></FONT></SPAN></FONT></P>
<P ALIGN=LEFT STYLE="margin-bottom: 0in; line-height: 115%"><FONT COLOR="#000000"><SPAN STYLE="text-decoration: none"><FONT FACE="Arial, sans-serif"><FONT SIZE=2 STYLE="font-size: 11pt"><SPAN STYLE="font-style: normal"><SPAN STYLE="font-weight: normal">	Length:
(16 bit int): 8 </SPAN></SPAN></FONT></FONT></SPAN></FONT>
</P>
<P ALIGN=LEFT STYLE="margin-bottom: 0in; font-style: normal; font-weight: normal; line-height: 115%; text-decoration: none">
<FONT FACE="Arial, sans-serif"><FONT SIZE=2 STYLE="font-size: 11pt">	ID:
(64 bits) </FONT></FONT>
</P>
<P ALIGN=LEFT STYLE="margin-bottom: 0in; font-style: normal; font-weight: normal; line-height: 115%; text-decoration: none">
<BR>
</P>
<P ALIGN=LEFT STYLE="margin-bottom: 0in; line-height: 115%"><FONT COLOR="#000000"><SPAN STYLE="text-decoration: none"><FONT FACE="Arial, sans-serif"><FONT SIZE=2 STYLE="font-size: 11pt"><SPAN STYLE="font-style: normal"><B>Probe
response:</B></SPAN></FONT></FONT></SPAN></FONT><FONT COLOR="#000000"><SPAN STYLE="text-decoration: none"><FONT FACE="Arial, sans-serif"><FONT SIZE=2 STYLE="font-size: 11pt"><SPAN STYLE="font-style: normal"><SPAN STYLE="font-weight: normal">
</SPAN></SPAN></FONT></FONT></SPAN></FONT>
</P>
<P ALIGN=LEFT STYLE="margin-bottom: 0in; line-height: 115%"><FONT COLOR="#000000"><SPAN STYLE="text-decoration: none"><FONT FACE="Arial, sans-serif"><FONT SIZE=2 STYLE="font-size: 11pt"><SPAN STYLE="font-style: normal"><SPAN STYLE="font-weight: normal">	Type:
(16 bit int): 0xAB35</SPAN></SPAN></FONT></FONT></SPAN></FONT></P>
<P ALIGN=LEFT STYLE="margin-bottom: 0in; line-height: 115%"><FONT COLOR="#000000"><SPAN STYLE="text-decoration: none"><FONT FACE="Arial, sans-serif"><FONT SIZE=2 STYLE="font-size: 11pt"><SPAN STYLE="font-style: normal"><SPAN STYLE="font-weight: normal">	Length:(16
bits): 8 </SPAN></SPAN></FONT></FONT></SPAN></FONT>
</P>
<P ALIGN=LEFT STYLE="margin-bottom: 0in; line-height: 115%"><FONT COLOR="#000000"><SPAN STYLE="text-decoration: none"><FONT FACE="Arial, sans-serif"><FONT SIZE=2 STYLE="font-size: 11pt"><SPAN STYLE="font-style: normal"><SPAN STYLE="font-weight: normal">	ID:
( 64 bits, echo of the corresponding probe) </SPAN></SPAN></FONT></FONT></SPAN></FONT>
</P>
<P ALIGN=LEFT STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P ALIGN=LEFT STYLE="margin-bottom: 0in; line-height: 115%"><FONT COLOR="#000000"><SPAN STYLE="text-decoration: none"><FONT FACE="Arial, sans-serif"><FONT SIZE=2 STYLE="font-size: 11pt"><SPAN STYLE="font-style: normal"><B>Others:
</B></SPAN></FONT></FONT></SPAN></FONT>
</P>
<P ALIGN=LEFT STYLE="margin-bottom: 0in; line-height: 115%"><FONT COLOR="#000000"><SPAN STYLE="text-decoration: none"><FONT FACE="Arial, sans-serif"><FONT SIZE=2 STYLE="font-size: 11pt"><SPAN STYLE="font-style: normal"><SPAN STYLE="font-weight: normal">Other
type of packets are possible for extra credit. The exact format will
have to be student defined. A list of packet type numbers, including
those for extra credit, are listed below: </SPAN></SPAN></FONT></FONT></SPAN></FONT>
</P>
<P ALIGN=LEFT STYLE="margin-top: 0.19in; margin-bottom: 0in; line-height: 115%">
<FONT COLOR="#000000"><SPAN STYLE="text-decoration: none"><FONT FACE="Arial, sans-serif"><FONT SIZE=4><SPAN STYLE="font-style: normal"><B>List
of all packet types, including those for extra credit: </B></SPAN></FONT></FONT></SPAN></FONT>
</P>
<TABLE WIDTH=100% CELLPADDING=4 CELLSPACING=0>
	<COL WIDTH=128*>
	<COL WIDTH=128*>
	<TR VALIGN=TOP>
		<TD WIDTH=50% STYLE="border-top: 1px solid #000000; border-bottom: 1px solid #000000; border-left: 1px solid #000000; border-right: none; padding-top: 0.04in; padding-bottom: 0.04in; padding-left: 0.04in; padding-right: 0in">
			<P CLASS="western" ALIGN=CENTER>Name</P>
		</TD>
		<TD WIDTH=50% STYLE="border: 1px solid #000000; padding: 0.04in">
			<P CLASS="western" ALIGN=CENTER>Value (16-bit hex)</P>
		</TD>
	</TR>
	<TR VALIGN=TOP>
		<TD WIDTH=50% STYLE="border-top: none; border-bottom: 1px solid #000000; border-left: 1px solid #000000; border-right: none; padding-top: 0in; padding-bottom: 0.04in; padding-left: 0.04in; padding-right: 0in">
			<P CLASS="western" ALIGN=CENTER><FONT FACE="Courier, monospace">Data</FONT></P>
		</TD>
		<TD WIDTH=50% STYLE="border-top: none; border-bottom: 1px solid #000000; border-left: 1px solid #000000; border-right: 1px solid #000000; padding-top: 0in; padding-bottom: 0.04in; padding-left: 0.04in; padding-right: 0.04in">
			<P CLASS="western" ALIGN=CENTER><FONT FACE="Courier, monospace">0xABCD</FONT></P>
		</TD>
	</TR>
	<TR VALIGN=TOP>
		<TD WIDTH=50% STYLE="border-top: none; border-bottom: 1px solid #000000; border-left: 1px solid #000000; border-right: none; padding-top: 0in; padding-bottom: 0.04in; padding-left: 0.04in; padding-right: 0in">
			<P CLASS="western" ALIGN=CENTER><FONT FACE="Courier, monospace">Leave</FONT></P>
		</TD>
		<TD WIDTH=50% STYLE="border-top: none; border-bottom: 1px solid #000000; border-left: 1px solid #000000; border-right: 1px solid #000000; padding-top: 0in; padding-bottom: 0.04in; padding-left: 0.04in; padding-right: 0.04in">
			<P CLASS="western" ALIGN=CENTER><FONT FACE="Courier, monospace">0xAB01</FONT></P>
		</TD>
	</TR>
	<TR VALIGN=TOP>
		<TD WIDTH=50% STYLE="border-top: none; border-bottom: 1px solid #000000; border-left: 1px solid #000000; border-right: none; padding-top: 0in; padding-bottom: 0.04in; padding-left: 0.04in; padding-right: 0in">
			<P CLASS="western" ALIGN=CENTER><FONT FACE="Courier, monospace">Quit</FONT></P>
		</TD>
		<TD WIDTH=50% STYLE="border-top: none; border-bottom: 1px solid #000000; border-left: 1px solid #000000; border-right: 1px solid #000000; padding-top: 0in; padding-bottom: 0.04in; padding-left: 0.04in; padding-right: 0.04in">
			<P CLASS="western" ALIGN=CENTER><FONT FACE="Courier, monospace">0xAB12</FONT></P>
		</TD>
	</TR>
	<TR VALIGN=TOP>
		<TD WIDTH=50% STYLE="border-top: none; border-bottom: 1px solid #000000; border-left: 1px solid #000000; border-right: none; padding-top: 0in; padding-bottom: 0.04in; padding-left: 0.04in; padding-right: 0in">
			<P CLASS="western" ALIGN=CENTER><FONT FACE="Courier, monospace">Link-state</FONT></P>
		</TD>
		<TD WIDTH=50% STYLE="border-top: none; border-bottom: 1px solid #000000; border-left: 1px solid #000000; border-right: 1px solid #000000; padding-top: 0in; padding-bottom: 0.04in; padding-left: 0.04in; padding-right: 0.04in">
			<P CLASS="western" ALIGN=CENTER><FONT FACE="Courier, monospace">0xABAC</FONT></P>
		</TD>
	</TR>
	<TR VALIGN=TOP>
		<TD WIDTH=50% STYLE="border-top: none; border-bottom: 1px solid #000000; border-left: 1px solid #000000; border-right: none; padding-top: 0in; padding-bottom: 0.04in; padding-left: 0.04in; padding-right: 0in">
			<P CLASS="western" ALIGN=CENTER><FONT FACE="Courier, monospace">RTT
			Probe Request</FONT></P>
		</TD>
		<TD WIDTH=50% STYLE="border-top: none; border-bottom: 1px solid #000000; border-left: 1px solid #000000; border-right: 1px solid #000000; padding-top: 0in; padding-bottom: 0.04in; padding-left: 0.04in; padding-right: 0.04in">
			<P CLASS="western" ALIGN=CENTER><FONT FACE="Courier, monospace">0xAB34</FONT></P>
		</TD>
	</TR>
	<TR VALIGN=TOP>
		<TD WIDTH=50% STYLE="border-top: none; border-bottom: 1px solid #000000; border-left: 1px solid #000000; border-right: none; padding-top: 0in; padding-bottom: 0.04in; padding-left: 0.04in; padding-right: 0in">
			<P CLASS="western" ALIGN=CENTER><FONT FACE="Courier, monospace">RTT
			Probe Response</FONT></P>
		</TD>
		<TD WIDTH=50% STYLE="border-top: none; border-bottom: 1px solid #000000; border-left: 1px solid #000000; border-right: 1px solid #000000; padding-top: 0in; padding-bottom: 0.04in; padding-left: 0.04in; padding-right: 0.04in">
			<P CLASS="western" ALIGN=CENTER> <FONT FACE="Courier, monospace">0xAB35
			</FONT>
			</P>
		</TD>
	</TR>
	<TR VALIGN=TOP>
		<TD WIDTH=50% STYLE="border-top: none; border-bottom: 1px solid #000000; border-left: 1px solid #000000; border-right: none; padding-top: 0in; padding-bottom: 0.04in; padding-left: 0.04in; padding-right: 0in">
			<P CLASS="western" ALIGN=CENTER><FONT FACE="Courier, monospace">Proxy
			Public Key</FONT></P>
		</TD>
		<TD WIDTH=50% STYLE="border-top: none; border-bottom: 1px solid #000000; border-left: 1px solid #000000; border-right: 1px solid #000000; padding-top: 0in; padding-bottom: 0.04in; padding-left: 0.04in; padding-right: 0.04in">
			<P CLASS="western" ALIGN=CENTER><FONT FACE="Courier, monospace">0xAB21</FONT></P>
		</TD>
	</TR>
	<TR VALIGN=TOP>
		<TD WIDTH=50% STYLE="border-top: none; border-bottom: 1px solid #000000; border-left: 1px solid #000000; border-right: none; padding-top: 0in; padding-bottom: 0.04in; padding-left: 0.04in; padding-right: 0in">
			<P CLASS="western" ALIGN=CENTER><FONT FACE="Courier, monospace">Signed
			Data</FONT></P>
		</TD>
		<TD WIDTH=50% STYLE="border-top: none; border-bottom: 1px solid #000000; border-left: 1px solid #000000; border-right: 1px solid #000000; padding-top: 0in; padding-bottom: 0.04in; padding-left: 0.04in; padding-right: 0.04in">
			<P CLASS="western" ALIGN=CENTER><FONT FACE="Courier, monospace">0xABC1</FONT></P>
		</TD>
	</TR>
	<TR VALIGN=TOP>
		<TD WIDTH=50% STYLE="border-top: none; border-bottom: 1px solid #000000; border-left: 1px solid #000000; border-right: none; padding-top: 0in; padding-bottom: 0.04in; padding-left: 0.04in; padding-right: 0in">
			<P CLASS="western" ALIGN=CENTER><FONT FACE="Courier, monospace">Proxy
			Secret key</FONT></P>
		</TD>
		<TD WIDTH=50% STYLE="border-top: none; border-bottom: 1px solid #000000; border-left: 1px solid #000000; border-right: 1px solid #000000; padding-top: 0in; padding-bottom: 0.04in; padding-left: 0.04in; padding-right: 0.04in">
			<P CLASS="western" ALIGN=CENTER><FONT FACE="Courier, monospace">0xAB22</FONT></P>
		</TD>
	</TR>
	<TR VALIGN=TOP>
		<TD WIDTH=50% STYLE="border-top: none; border-bottom: 1px solid #000000; border-left: 1px solid #000000; border-right: none; padding-top: 0in; padding-bottom: 0.04in; padding-left: 0.04in; padding-right: 0in">
			<P CLASS="western" ALIGN=CENTER><FONT FACE="Courier, monospace">Encrypted
			Data</FONT></P>
		</TD>
		<TD WIDTH=50% STYLE="border-top: none; border-bottom: 1px solid #000000; border-left: 1px solid #000000; border-right: 1px solid #000000; padding-top: 0in; padding-bottom: 0.04in; padding-left: 0.04in; padding-right: 0.04in">
			<P CLASS="western" ALIGN=CENTER><FONT FACE="Courier, monospace">0xABC2</FONT></P>
		</TD>
	</TR>
	<TR VALIGN=TOP>
		<TD WIDTH=50% STYLE="border-top: none; border-bottom: 1px solid #000000; border-left: 1px solid #000000; border-right: none; padding-top: 0in; padding-bottom: 0.04in; padding-left: 0.04in; padding-right: 0in">
			<P CLASS="western" ALIGN=CENTER><FONT FACE="Courier, monospace">Encrypted
			Link State</FONT></P>
		</TD>
		<TD WIDTH=50% STYLE="border-top: none; border-bottom: 1px solid #000000; border-left: 1px solid #000000; border-right: 1px solid #000000; padding-top: 0in; padding-bottom: 0.04in; padding-left: 0.04in; padding-right: 0.04in">
			<P CLASS="western" ALIGN=CENTER><FONT FACE="Courier, monospace">0XABAB</FONT></P>
		</TD>
	</TR>
	<TR VALIGN=TOP>
		<TD WIDTH=50% STYLE="border-top: none; border-bottom: 1px solid #000000; border-left: 1px solid #000000; border-right: none; padding-top: 0in; padding-bottom: 0.04in; padding-left: 0.04in; padding-right: 0in">
			<P CLASS="western" ALIGN=CENTER><FONT FACE="Courier, monospace">Signed
			link-state</FONT></P>
		</TD>
		<TD WIDTH=50% STYLE="border-top: none; border-bottom: 1px solid #000000; border-left: 1px solid #000000; border-right: 1px solid #000000; padding-top: 0in; padding-bottom: 0.04in; padding-left: 0.04in; padding-right: 0.04in">
			<P CLASS="western" ALIGN=CENTER><FONT FACE="Courier, monospace">0XABAD</FONT></P>
		</TD>
	</TR>
	<TR VALIGN=TOP>
		<TD WIDTH=50% STYLE="border-top: none; border-bottom: 1px solid #000000; border-left: 1px solid #000000; border-right: none; padding-top: 0in; padding-bottom: 0.04in; padding-left: 0.04in; padding-right: 0in">
			<P CLASS="western" ALIGN=CENTER><FONT FACE="Courier, monospace">Bandwidth
			Probe Request</FONT></P>
		</TD>
		<TD WIDTH=50% STYLE="border-top: none; border-bottom: 1px solid #000000; border-left: 1px solid #000000; border-right: 1px solid #000000; padding-top: 0in; padding-bottom: 0.04in; padding-left: 0.04in; padding-right: 0.04in">
			<P CLASS="western" ALIGN=CENTER><FONT FACE="Courier, monospace">0xAB45</FONT></P>
		</TD>
	</TR>
	<TR VALIGN=TOP>
		<TD WIDTH=50% STYLE="border-top: none; border-bottom: 1px solid #000000; border-left: 1px solid #000000; border-right: none; padding-top: 0in; padding-bottom: 0.04in; padding-left: 0.04in; padding-right: 0in">
			<P CLASS="western" ALIGN=CENTER><FONT FACE="Courier, monospace">Bandwidth
			Response</FONT></P>
		</TD>
		<TD WIDTH=50% STYLE="border-top: none; border-bottom: 1px solid #000000; border-left: 1px solid #000000; border-right: 1px solid #000000; padding-top: 0in; padding-bottom: 0.04in; padding-left: 0.04in; padding-right: 0.04in">
			<P CLASS="western" ALIGN=CENTER><FONT FACE="Courier, monospace">0xAB46</FONT></P>
		</TD>
	</TR>
</TABLE>
<P ALIGN=CENTER STYLE="margin-top: 0.19in; margin-bottom: 0in; line-height: 115%">
<BR>
</P>
<P ALIGN=LEFT STYLE="margin-top: 0.19in; margin-bottom: 0in; line-height: 115%">
<FONT COLOR="#000000"><SPAN STYLE="text-decoration: none"><FONT FACE="Arial, sans-serif"><FONT SIZE=4><SPAN STYLE="font-style: normal"><B>Configuration
file:</B></SPAN></FONT></FONT></SPAN></FONT></P>
<P ALIGN=JUSTIFY STYLE="margin-top: 0.19in; margin-bottom: 0in; line-height: 115%">
<FONT COLOR="#000000"><SPAN STYLE="text-decoration: none"><FONT FACE="Arial, sans-serif"><FONT SIZE=2 STYLE="font-size: 11pt"><SPAN STYLE="font-style: normal"><SPAN STYLE="font-weight: normal">When
the peers get more complex it become necessary to specify many
options. The configuration file contains the list of initial peers to
connect to, as well as the options needed for the control, encryption
and digital signature. Each option is given a name followed by the
necessary values, separated by white-space. Newlines separate
records.  Lines starting with â€œ</SPAN></SPAN></FONT></FONT></SPAN></FONT><FONT COLOR="#000000"><SPAN STYLE="text-decoration: none"><FONT FACE="Courier New, monospace"><FONT SIZE=2 STYLE="font-size: 11pt"><SPAN STYLE="font-style: normal"><SPAN STYLE="font-weight: normal">//</SPAN></SPAN></FONT></FONT></SPAN></FONT><FONT COLOR="#000000"><SPAN STYLE="text-decoration: none"><FONT FACE="Arial, sans-serif"><FONT SIZE=2 STYLE="font-size: 11pt"><SPAN STYLE="font-style: normal"><SPAN STYLE="font-weight: normal">'
are comments. </SPAN></SPAN></FONT></FONT></SPAN></FONT><FONT COLOR="#000000"><SPAN STYLE="text-decoration: none"><FONT FACE="Arial, sans-serif"><FONT SIZE=2 STYLE="font-size: 11pt"><SPAN STYLE="font-style: normal"><B>NOTE:
Multiple lines are allowed for peer and key values.</B></SPAN></FONT></FONT></SPAN></FONT><FONT COLOR="#000000"><SPAN STYLE="text-decoration: none"><FONT FACE="Arial, sans-serif"><FONT SIZE=2 STYLE="font-size: 11pt"><SPAN STYLE="font-style: normal"><SPAN STYLE="font-weight: normal">
The format of the configuration file is as follows: </SPAN></SPAN></FONT></FONT></SPAN></FONT>
</P>
<P ALIGN=LEFT STYLE="margin-left: 1.01in; margin-top: 0.19in; margin-bottom: 0in; line-height: 115%">
<FONT COLOR="#000000"><SPAN STYLE="text-decoration: none"><FONT FACE="Courier New, monospace"><FONT SIZE=2 STYLE="font-size: 11pt"><SPAN STYLE="font-style: normal"><SPAN STYLE="font-weight: normal">//
comments are pairs of slashes<BR>listenPort &lt;port
number&gt;<BR>linkPeriod &lt;period to send link state packets, in
seconds&gt;<BR>linkTimeout &lt;time to keep link-state packets, in
seconds&gt;  <BR>peer &lt;IP-address&gt; or &lt;DNS name&gt; &lt;port
number&gt; <BR>quitAfter &lt;seconds-before-quitting&gt; <BR>// the
following are optional: <BR>tapDevice
&lt;tap-device-name&gt;<BR>globalSecretKey &lt;key-value&gt; <BR>peerKey
&lt;MAC-address&gt; &lt;key-value&gt; </SPAN></SPAN></FONT></FONT></SPAN></FONT>
</P>
<P STYLE="margin-bottom: 0in"><BR>
</P>
<P STYLE="margin-bottom: 0in"><FONT COLOR="#000000"><SPAN STYLE="text-decoration: none"><FONT FACE="Arial, sans-serif"><FONT SIZE=4><SPAN STYLE="font-style: normal"><B>Managing
the Link-State Graph:</B></SPAN></FONT></FONT></SPAN></FONT></P>
<P STYLE="margin-bottom: 0in"><FONT COLOR="#000000"><SPAN STYLE="text-decoration: none">
</SPAN></FONT><BR>
</P>
<P ALIGN=JUSTIFY STYLE="margin-bottom: 0in"><FONT COLOR="#000000"><SPAN STYLE="text-decoration: none"><FONT FACE="Arial, sans-serif"><FONT SIZE=2 STYLE="font-size: 11pt"><SPAN STYLE="font-style: normal"><SPAN STYLE="font-weight: normal">In
this section, we describe how to use the above protocol to manage the
link state graph. It is a directed, weighted graph representing the
state of the network. A link-state record is an edge. Nodes are
identified using the layer-2 MAC address, either through the tapX or
eth0 interface. The weight of each edge is the Round-Trip-Time (RTT),
thus lower valued edges are better. The direction of each edge is
obtained by the local/remote part of the link-state record, the edge
begins at the local side and ends at the remote side. </SPAN></SPAN></FONT></FONT></SPAN></FONT>
</P>
<P ALIGN=JUSTIFY STYLE="margin-bottom: 0in"><BR>
</P>
<P ALIGN=JUSTIFY STYLE="margin-bottom: 0in"><FONT COLOR="#000000"><SPAN STYLE="text-decoration: none"><FONT FACE="Arial, sans-serif"><FONT SIZE=2 STYLE="font-size: 11pt"><SPAN STYLE="font-style: normal"><SPAN STYLE="font-weight: normal">In
order to build and maintain the graph, each proxy must perform the
following: </SPAN></SPAN></FONT></FONT></SPAN></FONT>
</P>
<P STYLE="margin-bottom: 0in"><BR>
</P>
<P ALIGN=JUSTIFY STYLE="margin-bottom: 0in"><FONT COLOR="#000000"><SPAN STYLE="text-decoration: none"><FONT FACE="Arial, sans-serif"><FONT SIZE=2 STYLE="font-size: 11pt"><SPAN STYLE="font-style: normal"><SPAN STYLE="font-weight: normal">	
</SPAN></SPAN></FONT></FONT></SPAN></FONT><FONT COLOR="#000000"><SPAN STYLE="text-decoration: none"><FONT FACE="Arial, sans-serif"><FONT SIZE=2 STYLE="font-size: 11pt"><I><SPAN STYLE="font-weight: normal">Create
link state records from socket connections. </SPAN></I></FONT></FONT></SPAN></FONT><FONT COLOR="#000000"><SPAN STYLE="text-decoration: none"><FONT FACE="Arial, sans-serif"><FONT SIZE=2 STYLE="font-size: 11pt"><SPAN STYLE="font-style: normal"><SPAN STYLE="font-weight: normal">
That is, for each connected peer, every </SPAN></SPAN></FONT></FONT></SPAN></FONT><FONT COLOR="#000000"><SPAN STYLE="text-decoration: none"><FONT FACE="Courier New, monospace"><FONT SIZE=2 STYLE="font-size: 11pt"><SPAN STYLE="font-style: normal"><SPAN STYLE="font-weight: normal">LinkPeriod
</SPAN></SPAN></FONT></FONT></SPAN></FONT><FONT COLOR="#000000"><SPAN STYLE="text-decoration: none"><FONT FACE="Arial, sans-serif"><FONT SIZE=2 STYLE="font-size: 11pt"><SPAN STYLE="font-style: normal"><SPAN STYLE="font-weight: normal">seconds
the proxy creates a new link state record. Note that record can be
created by maintain a local socket connection information combined
with the first part of the link state packet.  The RTT field is
created from measurements of RTT packets. If the proxy does not have
the RTT working, it should set all the RTT to a value of 1. </SPAN></SPAN></FONT></FONT></SPAN></FONT>
</P>
<P ALIGN=JUSTIFY STYLE="margin-bottom: 0in"><BR>
</P>
<P ALIGN=JUSTIFY STYLE="margin-bottom: 0in"><FONT COLOR="#000000"><SPAN STYLE="text-decoration: none"><FONT FACE="Arial, sans-serif"><FONT SIZE=2 STYLE="font-size: 11pt"><SPAN STYLE="font-style: normal"><SPAN STYLE="font-weight: normal">	</SPAN></SPAN></FONT></FONT></SPAN></FONT><FONT COLOR="#000000"><SPAN STYLE="text-decoration: none"><FONT FACE="Arial, sans-serif"><FONT SIZE=2 STYLE="font-size: 11pt"><I><SPAN STYLE="font-weight: normal">Forward
locally generated and records from other proxies to all their
neighbors. </SPAN></I></FONT></FONT></SPAN></FONT><FONT COLOR="#000000"><SPAN STYLE="text-decoration: none"><FONT FACE="Arial, sans-serif"><FONT SIZE=2 STYLE="font-size: 11pt"><SPAN STYLE="font-style: normal"><SPAN STYLE="font-weight: normal">If
you maintain the graph as an edge set, all you need to do is send all
the valid edges in the link state packet. </SPAN></SPAN></FONT></FONT></SPAN></FONT>
</P>
<P ALIGN=JUSTIFY STYLE="margin-bottom: 0in"><BR>
</P>
<P ALIGN=JUSTIFY STYLE="margin-bottom: 0in"><FONT COLOR="#000000"><SPAN STYLE="text-decoration: none"><FONT FACE="Arial, sans-serif"><FONT SIZE=2 STYLE="font-size: 11pt"><SPAN STYLE="font-style: normal"><SPAN STYLE="font-weight: normal">	</SPAN></SPAN></FONT></FONT></SPAN></FONT><FONT COLOR="#000000"><SPAN STYLE="text-decoration: none"><FONT FACE="Arial, sans-serif"><FONT SIZE=2 STYLE="font-size: 11pt"><I><SPAN STYLE="font-weight: normal">Removed
duplicates and time-out link state records</SPAN></I></FONT></FONT></SPAN></FONT><FONT COLOR="#000000"><SPAN STYLE="text-decoration: none"><FONT FACE="Arial, sans-serif"><FONT SIZE=2 STYLE="font-size: 11pt"><SPAN STYLE="font-style: normal"><SPAN STYLE="font-weight: normal">.
This relies on the ID field in the record/edge. The proxy can assume
the ID field is monotonically increasing, that is, always going up.
The proxy must generate records that are increasing as well. When
your proxy starts, it can assume zero as a base ID value. If a
received record/edge has a lower value, it is discarded. When a new
record/edge is received, it is time-stamped. Records that are older
than </SPAN></SPAN></FONT></FONT></SPAN></FONT><FONT COLOR="#000000"><SPAN STYLE="text-decoration: none"><FONT FACE="Courier New, monospace"><FONT SIZE=2 STYLE="font-size: 11pt"><SPAN STYLE="font-style: normal"><SPAN STYLE="font-weight: normal">LinkTimeout</SPAN></SPAN></FONT></FONT></SPAN></FONT><FONT COLOR="#000000"><SPAN STYLE="text-decoration: none"><FONT FACE="Arial, sans-serif"><FONT SIZE=2 STYLE="font-size: 11pt"><SPAN STYLE="font-style: normal"><SPAN STYLE="font-weight: normal">
seconds  are also removed from the graph. Records that have a lower
ID than expired records with higher IDs are also discarded. Thus, the
proxy must retain at least 1 expired edge in order to remember which
edges it must discard.  </SPAN></SPAN></FONT></FONT></SPAN></FONT>
</P>
<P STYLE="margin-bottom: 0in"><BR>
</P>
<P STYLE="margin-bottom: 0in"><FONT COLOR="#000000"><SPAN STYLE="text-decoration: none"><FONT FACE="Arial, sans-serif"><FONT SIZE=2 STYLE="font-size: 11pt"><SPAN STYLE="font-style: normal"><SPAN STYLE="font-weight: normal">In
addition, once it has the link-state graph, each proxy must:</SPAN></SPAN></FONT></FONT></SPAN></FONT></P>
<P ALIGN=JUSTIFY STYLE="margin-bottom: 0in"><BR>
</P>
<P ALIGN=JUSTIFY STYLE="margin-bottom: 0in"><FONT COLOR="#000000"><SPAN STYLE="text-decoration: none"><FONT FACE="Arial, sans-serif"><FONT SIZE=2 STYLE="font-size: 11pt"><SPAN STYLE="font-style: normal"><SPAN STYLE="font-weight: normal">	</SPAN></SPAN></FONT></FONT></SPAN></FONT><FONT COLOR="#000000"><SPAN STYLE="text-decoration: none"><FONT FACE="Arial, sans-serif"><FONT SIZE=2 STYLE="font-size: 11pt"><I><SPAN STYLE="font-weight: normal">Build
a forwarding table for packets from the graph.</SPAN></I></FONT></FONT></SPAN></FONT><FONT COLOR="#000000"><SPAN STYLE="text-decoration: none"><FONT FACE="Arial, sans-serif"><FONT SIZE=2 STYLE="font-size: 11pt"><SPAN STYLE="font-style: normal"><SPAN STYLE="font-weight: normal">
The table is quite simple; it maps a destination MAC address coming
from the tap device to a socket. You should run a shortest path
algorithm on the graph to build the forwarding table. </SPAN></SPAN></FONT></FONT></SPAN></FONT>
</P>
<P STYLE="margin-bottom: 0in"><BR>
</P>
<P ALIGN=LEFT STYLE="margin-top: 0.19in; margin-bottom: 0in; line-height: 115%">
<FONT COLOR="#000000"><SPAN STYLE="text-decoration: none"><FONT FACE="Arial, sans-serif"><FONT SIZE=4><SPAN STYLE="font-style: normal"><B>TAP
interface set up:  </B></SPAN></FONT></FONT></SPAN></FONT>
</P>
<P ALIGN=LEFT STYLE="margin-top: 0.19in; margin-bottom: 0in; line-height: 115%">
<FONT COLOR="#000000"><SPAN STYLE="text-decoration: none"><FONT FACE="Arial, sans-serif"><FONT SIZE=2 STYLE="font-size: 11pt"><SPAN STYLE="font-style: normal"><SPAN STYLE="font-weight: normal">In
order for the proxy to function, you should insure the IP addresses
on all the TAP interfaces are on the same subnet. In order to test
more peers, you can create additional tap devices on the same host. </SPAN></SPAN></FONT></FONT></SPAN></FONT>
</P>
<P ALIGN=LEFT STYLE="margin-top: 0.19in; margin-bottom: 0in; line-height: 115%">
<FONT COLOR="#000000"><SPAN STYLE="text-decoration: none"><FONT FACE="Arial, sans-serif"><FONT SIZE=2 STYLE="font-size: 11pt"><SPAN STYLE="font-style: normal"><SPAN STYLE="font-weight: normal">To
create a tap device, use the following command: </SPAN></SPAN></FONT></FONT></SPAN></FONT>
</P>
<P ALIGN=LEFT STYLE="margin-top: 0.19in; margin-bottom: 0in; line-height: 115%">
<FONT COLOR="#000000"><SPAN STYLE="text-decoration: none"><FONT FACE="Courier New, monospace"><FONT SIZE=2 STYLE="font-size: 11pt"><SPAN STYLE="font-style: normal"><SPAN STYLE="font-weight: normal">	openvpn
--mktun --dev tap&lt;X&gt; --lladdr &lt;layer-2-address&gt; </SPAN></SPAN></FONT></FONT></SPAN></FONT>
</P>
<P ALIGN=LEFT STYLE="margin-top: 0.19in; margin-bottom: 0in; line-height: 115%">
<FONT COLOR="#000000"><SPAN STYLE="text-decoration: none"><FONT FACE="Arial, sans-serif"><FONT SIZE=2 STYLE="font-size: 11pt"><SPAN STYLE="font-style: normal"><SPAN STYLE="font-weight: normal">Where
&lt;X&gt; is a number, for example, 2, and the layer-2 address, for
example: </SPAN></SPAN></FONT></FONT></SPAN></FONT>
</P>
<P ALIGN=LEFT STYLE="margin-top: 0.19in; margin-bottom: 0in; line-height: 115%">
<FONT COLOR="#000000"><SPAN STYLE="text-decoration: none"><FONT FACE="Arial, sans-serif"><FONT SIZE=2 STYLE="font-size: 11pt"><SPAN STYLE="font-style: normal"><SPAN STYLE="font-weight: normal">	</SPAN></SPAN></FONT></FONT></SPAN></FONT><FONT COLOR="#000000"><SPAN STYLE="text-decoration: none"><FONT FACE="Courier New, monospace"><FONT SIZE=2 STYLE="font-size: 11pt"><SPAN STYLE="font-style: normal"><SPAN STYLE="font-weight: normal">openvpn
--mktun --dev tap2 --lladdr 'AA:BB:CC:DD:EE:FF' </SPAN></SPAN></FONT></FONT></SPAN></FONT>
</P>
<P ALIGN=LEFT STYLE="margin-top: 0.19in; margin-bottom: 0in; line-height: 115%">
<FONT COLOR="#000000"><SPAN STYLE="text-decoration: none"><FONT FACE="Arial, sans-serif"><FONT SIZE=2 STYLE="font-size: 11pt"><SPAN STYLE="font-style: normal"><SPAN STYLE="font-weight: normal">To
see the MAC address of the device, use </SPAN></SPAN></FONT></FONT></SPAN></FONT><FONT COLOR="#000000"><SPAN STYLE="text-decoration: none"><FONT FACE="Courier New, monospace"><FONT SIZE=2 STYLE="font-size: 11pt"><SPAN STYLE="font-style: normal"><SPAN STYLE="font-weight: normal">ifconfig:
</SPAN></SPAN></FONT></FONT></SPAN></FONT>
</P>
<P ALIGN=LEFT STYLE="margin-top: 0.19in; margin-bottom: 0in; line-height: 115%">
<FONT COLOR="#000000"><SPAN STYLE="text-decoration: none"><FONT FACE="Courier New, monospace"><FONT SIZE=2 STYLE="font-size: 11pt"><SPAN STYLE="font-style: normal"><SPAN STYLE="font-weight: normal">	ifconfig
tap2</SPAN></SPAN></FONT></FONT></SPAN></FONT></P>
<P ALIGN=LEFT STYLE="margin-top: 0.19in; margin-bottom: 0in; line-height: 115%">
<FONT COLOR="#000000"><SPAN STYLE="text-decoration: none"><FONT FACE="Arial, sans-serif"><FONT SIZE=2 STYLE="font-size: 11pt"><SPAN STYLE="font-style: normal"><SPAN STYLE="font-weight: normal">To
change the MAC address after the tap is created, use the ifconfig
command and change the hardware ether address, for example: </SPAN></SPAN></FONT></FONT></SPAN></FONT>
</P>
<P ALIGN=LEFT STYLE="margin-top: 0.19in; margin-bottom: 0in; line-height: 115%">
<FONT COLOR="#000000"><SPAN STYLE="text-decoration: none"><FONT FACE="Arial, sans-serif"><FONT SIZE=2 STYLE="font-size: 11pt"><SPAN STYLE="font-style: normal"><SPAN STYLE="font-weight: normal">	
</SPAN></SPAN></FONT></FONT></SPAN></FONT><FONT COLOR="#000000"><SPAN STYLE="text-decoration: none"><FONT FACE="Courier New, monospace"><FONT SIZE=2 STYLE="font-size: 11pt"><SPAN STYLE="font-style: normal"><SPAN STYLE="font-weight: normal">sudo
ifconfig tap2 hw ether 'DE:AD:BE:EF:00:01' </SPAN></SPAN></FONT></FONT></SPAN></FONT>
</P>
<P ALIGN=LEFT STYLE="margin-top: 0.19in; margin-bottom: 0in; line-height: 115%">
<FONT COLOR="#000000"><SPAN STYLE="text-decoration: none"><FONT FACE="Arial, sans-serif"><FONT SIZE=2 STYLE="font-size: 11pt"><SPAN STYLE="font-style: normal"><SPAN STYLE="font-weight: normal">To
delete a tap device: </SPAN></SPAN></FONT></FONT></SPAN></FONT>
</P>
<P ALIGN=LEFT STYLE="margin-top: 0.19in; margin-bottom: 0in; line-height: 115%">
<FONT COLOR="#000000"><SPAN STYLE="text-decoration: none"><FONT FACE="Arial, sans-serif"><FONT SIZE=2 STYLE="font-size: 11pt"><SPAN STYLE="font-style: normal"><SPAN STYLE="font-weight: normal">	</SPAN></SPAN></FONT></FONT></SPAN></FONT><FONT COLOR="#000000"><SPAN STYLE="text-decoration: none"><FONT FACE="Courier New, monospace"><FONT SIZE=2 STYLE="font-size: 11pt"><SPAN STYLE="font-style: normal"><SPAN STYLE="font-weight: normal">sudo
openvpn â€“rmtun tap&lt;X&gt; </SPAN></SPAN></FONT></FONT></SPAN></FONT>
</P>
<P ALIGN=LEFT STYLE="margin-top: 0.19in; margin-bottom: 0in; line-height: 115%">
<FONT COLOR="#000000"><SPAN STYLE="text-decoration: none"><FONT FACE="Arial, sans-serif"><FONT SIZE=4><SPAN STYLE="font-style: normal"><B>How
the project will be graded: </B></SPAN></FONT></FONT></SPAN></FONT>
</P>
<P ALIGN=LEFT STYLE="margin-top: 0.19in; margin-bottom: 0in; line-height: 115%">
<FONT COLOR="#000000"><SPAN STYLE="text-decoration: none"><FONT FACE="Arial, sans-serif"><FONT SIZE=4><SPAN STYLE="font-style: normal"><B>Part
2: </B></SPAN></FONT></FONT></SPAN></FONT>
</P>
<P STYLE="margin-bottom: 0in"><FONT COLOR="#000000"><SPAN STYLE="text-decoration: none"><FONT FACE="Arial, sans-serif"><FONT SIZE=2 STYLE="font-size: 11pt"><SPAN STYLE="font-style: normal"><SPAN STYLE="font-weight: normal">For
part2 of of the projects, the following checklist of features should
be in your program in human-readable form. That is, it must have code
that is human readable: </SPAN></SPAN></FONT></FONT></SPAN></FONT>
</P>
<P STYLE="margin-bottom: 0in"><BR>
</P>
<OL>
	<LI><P STYLE="margin-bottom: 0in"><FONT COLOR="#000000"><SPAN STYLE="text-decoration: none"><FONT FACE="Arial, sans-serif"><FONT SIZE=2 STYLE="font-size: 11pt"><SPAN STYLE="font-style: normal"><SPAN STYLE="font-weight: normal">Configuration
	file read and initialization.</SPAN></SPAN></FONT></FONT></SPAN></FONT></P>
	<LI><P STYLE="margin-bottom: 0in"><FONT COLOR="#000000"><SPAN STYLE="text-decoration: none"><FONT FACE="Arial, sans-serif"><FONT SIZE=2 STYLE="font-size: 11pt"><SPAN STYLE="font-style: normal"><SPAN STYLE="font-weight: normal">Proxy
	client path connects to the remote proxy</SPAN></SPAN></FONT></FONT></SPAN></FONT></P>
	<LI><P STYLE="margin-bottom: 0in"><FONT COLOR="#000000"><SPAN STYLE="text-decoration: none"><FONT FACE="Arial, sans-serif"><FONT SIZE=2 STYLE="font-size: 11pt"><SPAN STYLE="font-style: normal"><SPAN STYLE="font-weight: normal">Proxy
	server path accepts connection from the remote proxy</SPAN></SPAN></FONT></FONT></SPAN></FONT></P>
	<LI><P STYLE="margin-bottom: 0in"><FONT COLOR="#000000"><SPAN STYLE="text-decoration: none"><FONT FACE="Arial, sans-serif"><FONT SIZE=2 STYLE="font-size: 11pt"><SPAN STYLE="font-style: normal"><SPAN STYLE="font-weight: normal">Sends
	link-state packets, with all records, every link Period seconds to
	connected proxies.  </SPAN></SPAN></FONT></FONT></SPAN></FONT>
	</P>
	<LI><P STYLE="margin-bottom: 0in"><FONT COLOR="#000000"><SPAN STYLE="text-decoration: none"><FONT FACE="Arial, sans-serif"><FONT SIZE=2 STYLE="font-size: 11pt"><SPAN STYLE="font-style: normal"><SPAN STYLE="font-weight: normal">Receives
	link state packets from connected proxies. </SPAN></SPAN></FONT></FONT></SPAN></FONT>
	</P>
	<LI><P STYLE="margin-bottom: 0in"><FONT COLOR="#000000"><SPAN STYLE="text-decoration: none"><FONT FACE="Arial, sans-serif"><FONT SIZE=2 STYLE="font-size: 11pt"><SPAN STYLE="font-style: normal"><SPAN STYLE="font-weight: normal">Adds
	proxies in link state records to the membership list</SPAN></SPAN></FONT></FONT></SPAN></FONT></P>
	<LI><P STYLE="margin-bottom: 0in"><FONT COLOR="#000000"><SPAN STYLE="text-decoration: none"><FONT FACE="Arial, sans-serif"><FONT SIZE=2 STYLE="font-size: 11pt"><SPAN STYLE="font-style: normal"><SPAN STYLE="font-weight: normal">Attempts
	to connect to remote proxy when new proxy is seen in a link state
	packet. </SPAN></SPAN></FONT></FONT></SPAN></FONT>
	</P>
	<LI><P STYLE="margin-bottom: 0in"><FONT COLOR="#000000"><SPAN STYLE="text-decoration: none"><FONT FACE="Arial, sans-serif"><FONT SIZE=2 STYLE="font-size: 11pt"><SPAN STYLE="font-style: normal"><SPAN STYLE="font-weight: normal">Expires
	old entries from the membership and link state list if no link state
	packet is received for link timeout seconds. </SPAN></SPAN></FONT></FONT></SPAN></FONT>
	</P>
	<LI><P STYLE="margin-bottom: 0in"><FONT COLOR="#000000"><SPAN STYLE="text-decoration: none"><FONT FACE="Arial, sans-serif"><FONT SIZE=2 STYLE="font-size: 11pt"><SPAN STYLE="font-style: normal"><SPAN STYLE="font-weight: normal">Forwards
	data packets to connected proxies. </SPAN></SPAN></FONT></FONT></SPAN></FONT>
	</P>
</OL>
<P ALIGN=LEFT STYLE="margin-top: 0.19in; margin-bottom: 0in; line-height: 115%">
<FONT COLOR="#000000"><SPAN STYLE="text-decoration: none"><FONT FACE="Arial, sans-serif"><FONT SIZE=4><SPAN STYLE="font-style: normal"><B>Grading
Part 3: </B></SPAN></FONT></FONT></SPAN></FONT><FONT COLOR="#000000"><SPAN STYLE="text-decoration: none"><FONT FACE="Arial, sans-serif"><FONT SIZE=2 STYLE="font-size: 11pt"><SPAN STYLE="font-style: normal"><SPAN STYLE="font-weight: normal">.
</SPAN></SPAN></FONT></FONT></SPAN></FONT>
</P>
<P STYLE="margin-bottom: 0in"><FONT COLOR="#000000"><SPAN STYLE="text-decoration: none"><FONT FACE="Arial, sans-serif"><FONT SIZE=2 STYLE="font-size: 11pt"><SPAN STYLE="font-style: normal"><SPAN STYLE="font-weight: normal">For
part 3, your project will be graded by running in in 2 scenarios.
There will be multiple groups of VMs. All the VM's within each group
can communicate directly, but some 'slaves' can only </SPAN></SPAN></FONT></FONT></SPAN></FONT><FONT COLOR="#000000"><SPAN STYLE="text-decoration: none"><FONT FACE="Arial, sans-serif"><FONT SIZE=2 STYLE="font-size: 11pt"><SPAN STYLE="font-style: normal"><SPAN STYLE="font-weight: normal">communicate
with a single â€œmasterâ€ in their group, and masters cannot
communicate with slaves outside their group, although all masters can
communicate.  Not that master VM's do not have an attached virtual
ethernet device, and only serve as routing nodes. </SPAN></SPAN></FONT></FONT></SPAN></FONT>
</P>
<P STYLE="margin-bottom: 0in"><BR>
</P>
<P STYLE="margin-bottom: 0in"><FONT COLOR="#000000"><SPAN STYLE="text-decoration: none"><FONT FACE="Arial, sans-serif"><FONT SIZE=2 STYLE="font-size: 11pt"><SPAN STYLE="font-style: normal"><SPAN STYLE="font-weight: normal">The
first scenario is a 2 slave system in a single VM group. Each slave
will have a proxy attached to a tap0 device. This is the base case.
We will test both </SPAN></SPAN></FONT></FONT></SPAN></FONT><FONT COLOR="#000000"><SPAN STYLE="text-decoration: none"><FONT FACE="Courier, monospace"><FONT SIZE=2 STYLE="font-size: 11pt"><SPAN STYLE="font-style: normal"><SPAN STYLE="font-weight: normal">ping</SPAN></SPAN></FONT></FONT></SPAN></FONT><FONT COLOR="#000000"><SPAN STYLE="text-decoration: none"><FONT FACE="Arial, sans-serif"><FONT SIZE=2 STYLE="font-size: 11pt"><SPAN STYLE="font-style: normal"><SPAN STYLE="font-weight: normal">
and </SPAN></SPAN></FONT></FONT></SPAN></FONT><FONT COLOR="#000000"><SPAN STYLE="text-decoration: none"><FONT FACE="Courier, monospace"><FONT SIZE=2 STYLE="font-size: 11pt"><SPAN STYLE="font-style: normal"><SPAN STYLE="font-weight: normal">ssh</SPAN></SPAN></FONT></FONT></SPAN></FONT><FONT COLOR="#000000"><SPAN STYLE="text-decoration: none"><FONT FACE="Arial, sans-serif"><FONT SIZE=2 STYLE="font-size: 11pt"><SPAN STYLE="font-style: normal"><SPAN STYLE="font-weight: normal">
to from one slave to another to make sure your proxies function. This
replicates part 1. </SPAN></SPAN></FONT></FONT></SPAN></FONT>
</P>
<P STYLE="margin-bottom: 0in"><BR>
</P>
<P STYLE="margin-bottom: 0in"><FONT COLOR="#000000"><SPAN STYLE="text-decoration: none"><FONT FACE="Arial, sans-serif"><FONT SIZE=2 STYLE="font-size: 11pt"><SPAN STYLE="font-style: normal"><SPAN STYLE="font-weight: normal">In
the second scenario, we will test a 5 proxy version. In this case, we
will run the proxy across 2 VM groups. We will test  </SPAN></SPAN></FONT></FONT></SPAN></FONT><FONT COLOR="#000000"><SPAN STYLE="text-decoration: none"><FONT FACE="Courier, monospace"><FONT SIZE=2 STYLE="font-size: 11pt"><SPAN STYLE="font-style: normal"><SPAN STYLE="font-weight: normal">ping</SPAN></SPAN></FONT></FONT></SPAN></FONT><FONT COLOR="#000000"><SPAN STYLE="text-decoration: none"><FONT FACE="Arial, sans-serif"><FONT SIZE=2 STYLE="font-size: 11pt"><SPAN STYLE="font-style: normal"><SPAN STYLE="font-weight: normal">
and </SPAN></SPAN></FONT></FONT></SPAN></FONT><FONT COLOR="#000000"><SPAN STYLE="text-decoration: none"><FONT FACE="Courier, monospace"><FONT SIZE=2 STYLE="font-size: 11pt"><SPAN STYLE="font-style: normal"><SPAN STYLE="font-weight: normal">ssh
</SPAN></SPAN></FONT></FONT></SPAN></FONT><FONT COLOR="#000000"><SPAN STYLE="text-decoration: none"><FONT FACE="Arial, sans-serif"><FONT SIZE=2 STYLE="font-size: 11pt"><SPAN STYLE="font-style: normal"><SPAN STYLE="font-weight: normal">using
two different tests. In one test, will see if these programs function
 between two slaves in the same VM group. This will test the
robustness of the system, although it will not exercise the routing.
In the second test, we will use  </SPAN></SPAN></FONT></FONT></SPAN></FONT><FONT COLOR="#000000"><SPAN STYLE="text-decoration: none"><FONT FACE="Courier, monospace"><FONT SIZE=2 STYLE="font-size: 11pt"><SPAN STYLE="font-style: normal"><SPAN STYLE="font-weight: normal">ping</SPAN></SPAN></FONT></FONT></SPAN></FONT><FONT COLOR="#000000"><SPAN STYLE="text-decoration: none"><FONT FACE="Arial, sans-serif"><FONT SIZE=2 STYLE="font-size: 11pt"><SPAN STYLE="font-style: normal"><SPAN STYLE="font-weight: normal">
and </SPAN></SPAN></FONT></FONT></SPAN></FONT><FONT COLOR="#000000"><SPAN STYLE="text-decoration: none"><FONT FACE="Courier, monospace"><FONT SIZE=2 STYLE="font-size: 11pt"><SPAN STYLE="font-style: normal"><SPAN STYLE="font-weight: normal">ssh
</SPAN></SPAN></FONT></FONT></SPAN></FONT><FONT COLOR="#000000"><SPAN STYLE="text-decoration: none"><FONT FACE="Arial, sans-serif"><FONT SIZE=2 STYLE="font-size: 11pt"><SPAN STYLE="font-style: normal"><SPAN STYLE="font-weight: normal">to
see if your proxies provide connectivity across the VM groups. This
will test your proxies' ability to route data across a graph of
connected nodes.  </SPAN></SPAN></FONT></FONT></SPAN></FONT>
</P>
<P STYLE="margin-bottom: 0in"><BR>
</P>
<P STYLE="margin-bottom: 0in"><FONT COLOR="#000000"><SPAN STYLE="text-decoration: none"><FONT FACE="Arial, sans-serif"><FONT SIZE=2 STYLE="font-size: 11pt"><SPAN STYLE="font-style: normal"><SPAN STYLE="font-weight: normal">Finally,
we will try to attach your proxy to a reference design to see if it
responds to join and link-state packets correctly. </SPAN></SPAN></FONT></FONT></SPAN></FONT>
</P>
<P STYLE="margin-bottom: 0in"><BR>
</P>
<P STYLE="margin-bottom: 0in"><FONT COLOR="#000000"><SPAN STYLE="text-decoration: none"><FONT FACE="Arial, sans-serif"><FONT SIZE=2 STYLE="font-size: 11pt"><SPAN STYLE="font-style: normal"><SPAN STYLE="font-weight: normal">For
part 3, you will be graded not only via subjective code review. The
proxy must implement all of part 2 above as well as: </SPAN></SPAN></FONT></FONT></SPAN></FONT>
</P>
<P STYLE="margin-bottom: 0in"><BR>
</P>
<OL>
	<LI><P STYLE="margin-bottom: 0in"><FONT COLOR="#000000"><SPAN STYLE="text-decoration: none"><FONT FACE="Arial, sans-serif"><FONT SIZE=2 STYLE="font-size: 11pt"><SPAN STYLE="font-style: normal"><SPAN STYLE="font-weight: normal">Builds
	a directed graph from the membership and link state lists</SPAN></SPAN></FONT></FONT></SPAN></FONT></P>
	<LI><P STYLE="margin-bottom: 0in"><FONT COLOR="#000000"><SPAN STYLE="text-decoration: none"><FONT FACE="Arial, sans-serif"><FONT SIZE=2 STYLE="font-size: 11pt"><SPAN STYLE="font-style: normal"><SPAN STYLE="font-weight: normal">Computes
	the shortest path and forwarding table to all the proxies. </SPAN></SPAN></FONT></FONT></SPAN></FONT>
	</P>
	<LI><P STYLE="margin-bottom: 0in"><FONT COLOR="#000000"><SPAN STYLE="text-decoration: none"><FONT FACE="Arial, sans-serif"><FONT SIZE=2 STYLE="font-size: 11pt"><SPAN STYLE="font-style: normal"><SPAN STYLE="font-weight: normal">Can
	be started up without connecting to a local network device, for
	forwarding proxies. </SPAN></SPAN></FONT></FONT></SPAN></FONT>
	</P>
	<LI><P STYLE="margin-bottom: 0in"><FONT COLOR="#000000"><SPAN STYLE="text-decoration: none"><FONT FACE="Arial, sans-serif"><FONT SIZE=2 STYLE="font-size: 11pt"><SPAN STYLE="font-style: normal"><SPAN STYLE="font-weight: normal">Can
	route data packets over a TCP connection when it is not for the
	local proxy. </SPAN></SPAN></FONT></FONT></SPAN></FONT>
	</P>
	<P STYLE="margin-bottom: 0in"></P>
</OL>
<P ALIGN=LEFT STYLE="margin-top: 0.19in; margin-bottom: 0in; line-height: 115%"><A NAME="h.sshe33avwqtn"></A>
<FONT COLOR="#000000"><SPAN STYLE="text-decoration: none"><FONT FACE="Arial, sans-serif"><FONT SIZE=4><SPAN STYLE="font-style: normal"><B>Project</B></SPAN></FONT></FONT></SPAN></FONT><FONT COLOR="#000000"><SPAN STYLE="text-decoration: none"><FONT FACE="Arial, sans-serif"><FONT SIZE=4><SPAN STYLE="font-style: normal"><B>
Resources:</B></SPAN></FONT></FONT></SPAN></FONT></P>
<P STYLE="margin-bottom: 0in"><FONT COLOR="#000000"><SPAN STYLE="text-decoration: none"><FONT FACE="Arial, sans-serif"><FONT SIZE=2 STYLE="font-size: 11pt"><SPAN STYLE="font-style: normal"><SPAN STYLE="font-weight: normal">You
will log into the machine cs352-XX for your group, the same as
project 1. </SPAN></SPAN></FONT></FONT></SPAN></FONT>
</P>
<P STYLE="margin-bottom: 0in"><BR>
</P>
<P STYLE="margin-bottom: 0in"><FONT COLOR="#000000"><SPAN STYLE="text-decoration: none"><FONT FACE="Arial, sans-serif"><FONT SIZE=2 STYLE="font-size: 11pt"><SPAN STYLE="font-style: normal"><SPAN STYLE="font-weight: normal">A</SPAN></SPAN></FONT></FONT></SPAN></FONT>
<A HREF="http://www.kernel.org/doc/man-pages/online/pages/man2/settimeofday.2.html">timestamp
function in C</A><FONT COLOR="#000000"><SPAN STYLE="text-decoration: none"><FONT FACE="Arial, sans-serif"><FONT SIZE=2 STYLE="font-size: 11pt"><SPAN STYLE="font-style: normal"><SPAN STYLE="font-weight: normal">.</SPAN></SPAN></FONT></FONT></SPAN></FONT></P>
<P STYLE="margin-bottom: 0in"><BR>
</P>
<P STYLE="margin-bottom: 0in"><FONT COLOR="#000000"><SPAN STYLE="text-decoration: none"><FONT FACE="Arial, sans-serif"><FONT SIZE=2 STYLE="font-size: 11pt"><SPAN STYLE="font-style: normal"><SPAN STYLE="font-weight: normal">Getting
the IP and port numbers on a connected socket. In C, you can use
</SPAN></SPAN></FONT></FONT></SPAN></FONT><A HREF="http://manpages.ubuntu.com/manpages/jaunty/man2/getsockname.2.html">getsockname</A><FONT COLOR="#000000"><SPAN STYLE="text-decoration: none"><FONT FACE="Arial, sans-serif"><FONT SIZE=2 STYLE="font-size: 11pt"><SPAN STYLE="font-style: normal"><SPAN STYLE="font-weight: normal">
and </SPAN></SPAN></FONT></FONT></SPAN></FONT><A HREF="http://manpages.ubuntu.com/manpages/jaunty/man2/getpeername.2.html">getpeername</A><FONT COLOR="#000000"><SPAN STYLE="text-decoration: none"><FONT FACE="Arial, sans-serif"><FONT SIZE=2 STYLE="font-size: 11pt"><SPAN STYLE="font-style: normal"><SPAN STYLE="font-weight: normal">.
</SPAN></SPAN></FONT></FONT></SPAN></FONT>
</P>
<P STYLE="margin-bottom: 0in"><BR>
</P>
<P STYLE="margin-bottom: 0in"><FONT COLOR="#000000"><SPAN STYLE="text-decoration: none"><FONT FACE="Arial, sans-serif"><FONT SIZE=2 STYLE="font-size: 11pt"><SPAN STYLE="font-style: normal"><SPAN STYLE="font-weight: normal">64
bit data types </SPAN></SPAN></FONT></FONT></SPAN></FONT><A HREF="http://gcc.gnu.org/onlinedocs/gcc/Long-Long.html">are
available on 32-bit machines </A><FONT COLOR="#000000"><SPAN STYLE="text-decoration: none"><FONT FACE="Arial, sans-serif"><FONT SIZE=2 STYLE="font-size: 11pt"><SPAN STYLE="font-style: normal"><SPAN STYLE="font-weight: normal">as
a </SPAN></SPAN></FONT></FONT></SPAN></FONT><FONT COLOR="#000000"><SPAN STYLE="text-decoration: none"><FONT FACE="Courier New, monospace"><FONT SIZE=2 STYLE="font-size: 11pt"><SPAN STYLE="font-style: normal"><SPAN STYLE="font-weight: normal">long
long</SPAN></SPAN></FONT></FONT></SPAN></FONT><FONT COLOR="#000000"><SPAN STYLE="text-decoration: none"><FONT FACE="Arial, sans-serif"><FONT SIZE=2 STYLE="font-size: 11pt"><SPAN STYLE="font-style: normal"><SPAN STYLE="font-weight: normal">.
E.g </SPAN></SPAN></FONT></FONT></SPAN></FONT><FONT COLOR="#000000"><SPAN STYLE="text-decoration: none"><FONT FACE="Courier New, monospace"><FONT SIZE=2 STYLE="font-size: 11pt"><SPAN STYLE="font-style: normal"><SPAN STYLE="font-weight: normal">sizeof(long
long)</SPAN></SPAN></FONT></FONT></SPAN></FONT><FONT COLOR="#000000"><SPAN STYLE="text-decoration: none"><FONT FACE="Arial, sans-serif"><FONT SIZE=2 STYLE="font-size: 11pt"><SPAN STYLE="font-style: normal"><SPAN STYLE="font-weight: normal">
is 8. </SPAN></SPAN></FONT></FONT></SPAN></FONT>
</P>
<P STYLE="margin-bottom: 0in"><BR>
</P>
<P STYLE="margin-bottom: 0in"><FONT COLOR="#000000"><SPAN STYLE="text-decoration: none"><FONT FACE="Arial, sans-serif"><FONT SIZE=2 STYLE="font-size: 11pt"><SPAN STYLE="font-style: normal"><SPAN STYLE="font-weight: normal">Creating
unique ID's: You can use the timestamp function as above. </SPAN></SPAN></FONT></FONT></SPAN></FONT>
</P>
<P STYLE="margin-bottom: 0in"><BR>
</P>
<P STYLE="margin-bottom: 0in"><FONT COLOR="#000000"><SPAN STYLE="text-decoration: none"><FONT FACE="Arial, sans-serif"><FONT SIZE=4><SPAN STYLE="font-style: normal"><B>Some
more tips, tricks, and resources: </B></SPAN></FONT></FONT></SPAN></FONT>
</P>
<P STYLE="margin-bottom: 0in"><BR>
</P>
<P STYLE="margin-bottom: 0in"><FONT COLOR="#000000"><SPAN STYLE="text-decoration: none"><FONT FACE="Arial, sans-serif"><FONT SIZE=2 STYLE="font-size: 11pt"><SPAN STYLE="font-style: normal"><SPAN STYLE="font-weight: normal">To
parse the input files, you can use </SPAN></SPAN></FONT></FONT></SPAN></FONT><FONT COLOR="#000000"><SPAN STYLE="text-decoration: none"><FONT FACE="Courier New, monospace"><FONT SIZE=2 STYLE="font-size: 11pt"><SPAN STYLE="font-style: normal"><SPAN STYLE="font-weight: normal">fgets()</SPAN></SPAN></FONT></FONT></SPAN></FONT><FONT COLOR="#000000"><SPAN STYLE="text-decoration: none"><FONT FACE="Arial, sans-serif"><FONT SIZE=2 STYLE="font-size: 11pt"><SPAN STYLE="font-style: normal"><SPAN STYLE="font-weight: normal">
and </SPAN></SPAN></FONT></FONT></SPAN></FONT><FONT COLOR="#000000"><SPAN STYLE="text-decoration: none"><FONT FACE="Courier New, monospace"><FONT SIZE=2 STYLE="font-size: 11pt"><SPAN STYLE="font-style: normal"><SPAN STYLE="font-weight: normal">strtok()</SPAN></SPAN></FONT></FONT></SPAN></FONT><FONT COLOR="#000000"><SPAN STYLE="text-decoration: none"><FONT FACE="Arial, sans-serif"><FONT SIZE=2 STYLE="font-size: 11pt"><SPAN STYLE="font-style: normal"><SPAN STYLE="font-weight: normal">.
There are also other libraries you can use.  </SPAN></SPAN></FONT></FONT></SPAN></FONT><A HREF="http://web.eecs.utk.edu/~bvz/teaching/cs140Fa09/labs/lab3/strtok.html">See
this page for some sample code. </A>
</P>
<P STYLE="margin-bottom: 0in"><BR>
</P>
<P STYLE="margin-bottom: 0in"><FONT COLOR="#000000"><SPAN STYLE="text-decoration: none"><FONT FACE="Arial, sans-serif"><FONT SIZE=2 STYLE="font-size: 11pt"><SPAN STYLE="font-style: normal"><SPAN STYLE="font-weight: normal">User
</SPAN></SPAN></FONT></FONT></SPAN></FONT><FONT COLOR="#000000"><SPAN STYLE="text-decoration: none"><FONT FACE="Courier New, monospace"><FONT SIZE=2 STYLE="font-size: 11pt"><SPAN STYLE="font-style: normal"><SPAN STYLE="font-weight: normal">getifaddrs()
</SPAN></SPAN></FONT></FONT></SPAN></FONT><FONT COLOR="#000000"><SPAN STYLE="text-decoration: none"><FONT FACE="Arial, sans-serif"><FONT SIZE=2 STYLE="font-size: 11pt"><SPAN STYLE="font-style: normal"><SPAN STYLE="font-weight: normal">to
get a list of IP addresses for all the interfaces on a machine. </SPAN></SPAN></FONT></FONT></SPAN></FONT><A HREF="http://www.kernel.org/doc/man-pages/online/pages/man3/getifaddrs.3.html">See
the bottom of this man pages for example code.</A><FONT COLOR="#000000"><SPAN STYLE="text-decoration: none"><FONT FACE="Arial, sans-serif"><FONT SIZE=2 STYLE="font-size: 11pt"><SPAN STYLE="font-style: normal"><SPAN STYLE="font-weight: normal">
</SPAN></SPAN></FONT></FONT></SPAN></FONT>
</P>
<P STYLE="margin-bottom: 0in"><BR>
</P>
<P STYLE="margin-bottom: 0in"><FONT COLOR="#000000"><SPAN STYLE="text-decoration: none"><FONT FACE="Arial, sans-serif"><FONT SIZE=2 STYLE="font-size: 11pt"><SPAN STYLE="font-style: normal"><SPAN STYLE="font-weight: normal">Uthash
and utlist are very usable libraries to </SPAN></SPAN></FONT></FONT></SPAN></FONT><A HREF="http://uthash.sourceforge.net/">build
hash tables </A><FONT COLOR="#000000"><SPAN STYLE="text-decoration: none"><FONT FACE="Arial, sans-serif"><FONT SIZE=2 STYLE="font-size: 11pt"><SPAN STYLE="font-style: normal"><SPAN STYLE="font-weight: normal">and
</SPAN></SPAN></FONT></FONT></SPAN></FONT><A HREF="http://uthash.sourceforge.net/utlist.html">linked-lists</A><FONT COLOR="#000000"><SPAN STYLE="text-decoration: none"><FONT FACE="Arial, sans-serif"><FONT SIZE=2 STYLE="font-size: 11pt"><SPAN STYLE="font-style: normal"><SPAN STYLE="font-weight: normal">
in C. </SPAN></SPAN></FONT></FONT></SPAN></FONT>
</P>
<P STYLE="margin-bottom: 0in"><BR>
</P>
<P STYLE="margin-bottom: 0in"><FONT COLOR="#000000"><SPAN STYLE="text-decoration: none"><FONT FACE="Arial, sans-serif"><FONT SIZE=2 STYLE="font-size: 11pt"><SPAN STYLE="font-style: normal"><SPAN STYLE="font-weight: normal">Below
is a modified </SPAN></SPAN></FONT></FONT></SPAN></FONT><FONT COLOR="#000000"><SPAN STYLE="text-decoration: none"><FONT FACE="Courier New, monospace"><FONT SIZE=2 STYLE="font-size: 11pt"><SPAN STYLE="font-style: normal"><SPAN STYLE="font-weight: normal">allocate_tunnel()</SPAN></SPAN></FONT></FONT></SPAN></FONT><FONT COLOR="#000000"><SPAN STYLE="text-decoration: none"><FONT FACE="Arial, sans-serif"><FONT SIZE=2 STYLE="font-size: 11pt"><SPAN STYLE="font-style: normal"><SPAN STYLE="font-weight: normal">
function that returns the MAC address of an interface in Linux: </SPAN></SPAN></FONT></FONT></SPAN></FONT>
</P>
<P STYLE="margin-bottom: 0in"><BR>
</P>
<P STYLE="margin-bottom: 0in"><FONT COLOR="#000000"><SPAN STYLE="text-decoration: none"><FONT FACE="Courier New, monospace"><FONT SIZE=2><SPAN STYLE="font-style: normal"><SPAN STYLE="font-weight: normal">#define
MAX_DEV_LINE 256 </SPAN></SPAN></FONT></FONT></SPAN></FONT>
</P>
<P STYLE="margin-bottom: 0in"><BR>
</P>
<PRE CLASS="western"><FONT COLOR="#000000"><SPAN STYLE="text-decoration: none"><FONT FACE="Courier New, monospace"><FONT SIZE=2><SPAN STYLE="font-style: normal"><SPAN STYLE="font-weight: normal">int allocate_tunnel(char </SPAN></SPAN></FONT></FONT></SPAN></FONT><FONT COLOR="#000000"><SPAN STYLE="text-decoration: none"><FONT FACE="Courier New, monospace"><FONT SIZE=2><SPAN STYLE="font-style: normal"><B>*dev, int flags, char*</B></SPAN></FONT></FONT></SPAN></FONT><FONT COLOR="#000000"><SPAN STYLE="text-decoration: none"><FONT FACE="Courier New, monospace"><FONT SIZE=2><SPAN STYLE="font-style: normal"><SPAN STYLE="font-weight: normal"> local_mac) {</SPAN></SPAN></FONT></FONT></SPAN></FONT>
        <FONT FACE="Courier New, monospace"><FONT SIZE=2>int fd, error;</FONT></FONT>
        struct ifreq ifr;
        char *device_name = &quot;/dev/net/tun&quot;;
        char buffer[MAX_DEV_LINE];
	
        if( (fd = open(device_name , O_RDWR)) &lt; 0 ) {
                fprintf(stderr,&quot;error opening /dev/net/tun\n%d:
%s\n&quot;,errno,strerror(errno));
                return fd;
        }
        memset(&amp;ifr, 0, sizeof(ifr));
        ifr.ifr_flags = flags;
        if (*dev) {
                strncpy(ifr.ifr_name, dev, IFNAMSIZ);
        }
        if( (error = ioctl(fd, TUNSETIFF, (void *)&amp;ifr)) &lt; 0 ) {
                fprintf(stderr,&quot;ioctl on tap failed\n%d: %s\n&quot;,errno,strerror(errno));
                close(fd);
                return error;
        }
        strcpy(dev, ifr.ifr_name);

        // Get device MAC address //
        
        sprintf(buffer,&quot;<I>/sys/class/net/</I>%s/address&quot;,dev);
        FILE* f = fopen(buffer,&quot;r&quot;);
        fread(buffer,1,MAX_DEV_LINE,f);
        sscanf(buffer,&quot;%hhX:%hhX:%hhX:%hhX:%hhX:%hhX&quot;,local_mac,local_mac+1,local_mac+2,local_mac+3,local_mac+4,local_mac+5);
        fclose(f);
        return fd;
	 
}</PRE><P STYLE="margin-bottom: 0in">
<BR>
</P>
<P ALIGN=LEFT STYLE="margin-top: 0.19in; margin-bottom: 0.06in; line-height: 115%"><A NAME="h.jbi24soc1we4"></A>
<FONT COLOR="#000000"><SPAN STYLE="text-decoration: none"><FONT FACE="Arial, sans-serif"><FONT SIZE=4><SPAN STYLE="font-style: normal"><B>Extra</B></SPAN></FONT></FONT></SPAN></FONT><FONT COLOR="#000000"><SPAN STYLE="text-decoration: none"><FONT FACE="Arial, sans-serif"><FONT SIZE=4><SPAN STYLE="font-style: normal"><B>
Credit:</B></SPAN></FONT></FONT></SPAN></FONT></P>
<P ALIGN=LEFT STYLE="margin-top: 0.19in; margin-bottom: 0.06in; line-height: 115%">
<FONT COLOR="#000000"><SPAN STYLE="text-decoration: none"><FONT FACE="Arial, sans-serif"><FONT SIZE=2 STYLE="font-size: 11pt"><SPAN STYLE="font-style: normal"><SPAN STYLE="font-weight: normal">In
order to keep the extra credit compatible with the reference
implementation, do not change the format for the base packet types,
which are: </SPAN></SPAN></FONT></FONT></SPAN></FONT><FONT COLOR="#000000"><SPAN STYLE="text-decoration: none"><FONT FACE="Courier, monospace"><FONT SIZE=2 STYLE="font-size: 11pt"><SPAN STYLE="font-style: normal"><SPAN STYLE="font-weight: normal">data,
join, leave, quit, link-state, RTT probe request</SPAN></SPAN></FONT></FONT></SPAN></FONT><FONT COLOR="#000000"><SPAN STYLE="text-decoration: none"><FONT FACE="Arial, sans-serif"><FONT SIZE=2 STYLE="font-size: 11pt"><SPAN STYLE="font-style: normal"><SPAN STYLE="font-weight: normal">
and </SPAN></SPAN></FONT></FONT></SPAN></FONT><FONT COLOR="#000000"><SPAN STYLE="text-decoration: none"><FONT FACE="Courier, monospace"><FONT SIZE=2 STYLE="font-size: 11pt"><SPAN STYLE="font-style: normal"><SPAN STYLE="font-weight: normal">RTT
probe response</SPAN></SPAN></FONT></FONT></SPAN></FONT><FONT COLOR="#000000"><SPAN STYLE="text-decoration: none"><FONT FACE="Arial, sans-serif"><FONT SIZE=2 STYLE="font-size: 11pt"><SPAN STYLE="font-style: normal"><SPAN STYLE="font-weight: normal">.
</SPAN></SPAN></FONT></FONT></SPAN></FONT>
</P>
<P ALIGN=LEFT STYLE="margin-top: 0.19in; margin-bottom: 0.06in; line-height: 115%">
<BR><BR>
</P>
<P ALIGN=LEFT STYLE="margin-bottom: 0in; line-height: 115%"><FONT COLOR="#000000"><SPAN STYLE="text-decoration: none"><FONT FACE="Arial, sans-serif"><FONT SIZE=2 STYLE="font-size: 11pt"><SPAN STYLE="font-style: normal"><B>Use
Bandwidth for the link cost (+15%)<BR></B></SPAN></FONT></FONT></SPAN></FONT><BR>
</P>
<P ALIGN=LEFT STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P ALIGN=LEFT STYLE="margin-bottom: 0in; line-height: 115%"><FONT COLOR="#000000"><SPAN STYLE="text-decoration: none"><FONT FACE="Arial, sans-serif"><FONT SIZE=2 STYLE="font-size: 11pt"><SPAN STYLE="font-style: normal"><SPAN STYLE="font-weight: normal">For
this extra credit, you will use the bandwidth between peers as the
link cost.  Because higher bandwidth is better, you should use
1/Bandwidth as the link metric (in gigabits per second). </SPAN></SPAN></FONT></FONT></SPAN></FONT>
</P>
<P ALIGN=LEFT STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P ALIGN=LEFT STYLE="margin-bottom: 0in; line-height: 115%"><FONT COLOR="#000000"><SPAN STYLE="text-decoration: none"><FONT FACE="Arial, sans-serif"><FONT SIZE=2 STYLE="font-size: 11pt"><SPAN STYLE="font-style: normal"><B>Encryption
(20 % extra points for data + 10% extra for link state). </B></SPAN></FONT></FONT></SPAN></FONT>
</P>
<P ALIGN=LEFT STYLE="margin-bottom: 0in; line-height: 115%"><FONT COLOR="#000000"><SPAN STYLE="text-decoration: none"><FONT FACE="Arial, sans-serif"><FONT SIZE=2 STYLE="font-size: 11pt"><SPAN STYLE="font-style: normal"><SPAN STYLE="font-weight: normal">For
this extra credit, you can add a new VLAN  types where the data field
of the packet is encrypted using a shared secret key.  The secret key
should be included as a command line option. You can use AES to
actually encrypt the data .  Wikipedia has a </SPAN></SPAN></FONT></FONT></SPAN></FONT><A HREF="http://en.wikipedia.org/wiki/AES_implementations">good
list of AES implementations</A>. <FONT COLOR="#000000"><SPAN STYLE="text-decoration: none"><FONT FACE="Arial, sans-serif"><FONT SIZE=2 STYLE="font-size: 11pt"><SPAN STYLE="font-style: normal"><SPAN STYLE="font-weight: normal">You
should get data packet encryption working first, and then for 10%
extra points encrypt the link-state exchanges as well (each of these
has a packet type defined above). </SPAN></SPAN></FONT></FONT></SPAN></FONT>
</P>
<P ALIGN=LEFT STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P ALIGN=LEFT STYLE="margin-bottom: 0in; line-height: 115%"><FONT COLOR="#000000"><SPAN STYLE="text-decoration: none"><FONT FACE="Arial, sans-serif"><FONT SIZE=2 STYLE="font-size: 11pt"><SPAN STYLE="font-style: normal"><B>Digital
signatures (20% extra points): </B></SPAN></FONT></FONT></SPAN></FONT>
</P>
<P ALIGN=LEFT STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P ALIGN=LEFT STYLE="margin-bottom: 0in; line-height: 115%"><FONT FACE="Arial, sans-serif"><FONT SIZE=2 STYLE="font-size: 11pt">The
idea here is to keep the communication verified by a given set of
proxies to prevent spoofing. Each data packet will be signed with a
combination of hash function and public key.  </FONT><FONT SIZE=2 STYLE="font-size: 11pt">You
should add a public key to each link state record, and a signature
field to each data packet. You should send signed packets with a
different packet type, in this case 0XABC2. The signature field
should take all the bytes in the data packet, hash them, and then add
the digital signature.  When a proxy receives a data packet, it
should verify that the signed hash of the packet matches that hashed
over the data part of the packet.</FONT>  <FONT SIZE=2 STYLE="font-size: 11pt">You
can use the classes in the Java Security API, see this </FONT><A HREF="http://download.oracle.com/javase/tutorial/security/apisign/index.html"><FONT SIZE=2 STYLE="font-size: 11pt">tutorial
on using digital signatures in Java</FONT></A><FONT SIZE=2 STYLE="font-size: 11pt">.
 A signed packet should use the special type as defined above. </FONT></FONT>
</P>
<P ALIGN=LEFT STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P ALIGN=LEFT STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P ALIGN=LEFT STYLE="margin-bottom: 0in; line-height: 115%"><FONT COLOR="#000000"><SPAN STYLE="text-decoration: none"><FONT FACE="Arial, sans-serif"><FONT SIZE=2 STYLE="font-size: 11pt"><SPAN STYLE="font-style: normal"><B>Implement
bandwidth metering for each connected proxy (15% extra): </B></SPAN></FONT></FONT></SPAN></FONT>
</P>
<P ALIGN=LEFT STYLE="margin-bottom: 0in; line-height: 115%"><FONT COLOR="#000000"><SPAN STYLE="text-decoration: none"><FONT FACE="Arial, sans-serif"><FONT SIZE=2 STYLE="font-size: 11pt"><SPAN STYLE="font-style: normal"><SPAN STYLE="font-weight: normal">In
this extension, you will implement a token bucket for each TCP
socket. This will allow the bandwidth of data packets to become
throttled (also called choking) to a specific value. Your proxy
should take a command line argument that specifies the maximum
bandwidth and burst size of the bucket for all the socket connections
</SPAN></SPAN></FONT></FONT></SPAN></FONT>
</P>
<P ALIGN=LEFT STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P ALIGN=LEFT STYLE="margin-bottom: 0in; line-height: 115%"><BR>
</P>
<P ALIGN=LEFT STYLE="margin-bottom: 0in; line-height: 115%"><FONT COLOR="#000000"><SPAN STYLE="text-decoration: none">
 </SPAN></FONT>
</P>
<P ALIGN=LEFT STYLE="margin-bottom: 0in; line-height: 115%"><FONT COLOR="#000000"><SPAN STYLE="text-decoration: none">
  </SPAN></FONT>
</P>
<P ALIGN=LEFT STYLE="margin-bottom: 0in; line-height: 115%"><FONT COLOR="#000000"><SPAN STYLE="text-decoration: none">
   </SPAN></FONT>
</P>
</BODY>
</HTML>